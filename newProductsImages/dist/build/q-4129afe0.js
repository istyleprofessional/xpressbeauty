import{b as f,d as g,T as b,B as w,P as o,E as h,q as m,K as v,M as S,_ as F,w as D}from"./q-cea67d7a.js";import{I as P}from"./q-086cadbe.js";import{r as C}from"./q-1dc7e6f6.js";import"./q-97996d90.js";const j=async()=>{const[r,e,l]=f(),t=[];for(const n of e.value||[])t.push(n.rating);const c=t.reduce((n,u)=>n+u,0);r.value=Math.round(c/t.length*2)/2,l.value=t.length},U=({track:r})=>{var l,t,c,n,u,d,i,p,a,s,y,x;const[e]=f();r(()=>e.currencyObject),e.currencyObject==="1"&&(e.product.priceType==="range"?(e.product.price.min=parseFloat((c=(t=(l=e.product)==null?void 0:l.price)==null?void 0:t.min)==null?void 0:c.toString())*.9,e.product.price.max=parseFloat((u=(n=e.product.price)==null?void 0:n.max)==null?void 0:u.toString())*.9):(e.product.price.regular=parseFloat((i=(d=e.product.price)==null?void 0:d.regular)==null?void 0:i.toString())*.9,(p=e.product.sale_price)!=null&&p.sale&&parseFloat(((a=e.product.sale_price)==null?void 0:a.sale.toString())??"0")>0&&(e.product.sale_price.sale=parseFloat((x=(y=(s=e.product)==null?void 0:s.sale_price)==null?void 0:y.sale)==null?void 0:x.toString())*.9)))},A=()=>{var c,n,u,d,i,p,a;const[r,e,l,t]=f();e.product.priceType==="range"?e.product.price.min!==""&&e.product.price.max!==""&&(r.value=`${parseFloat((c=e.product.price)==null?void 0:c.min).toLocaleString("en-US",{style:"currency",currency:e.currencyObject==="1"?"USD":"CAD"})} - ${parseFloat(e.product.price.max).toLocaleString("en-US",{style:"currency",currency:e.currencyObject==="1"?"USD":"CAD"})}`,l.value=`${(parseFloat(e.product.price.min)-parseFloat(e.product.price.min)*.2).toLocaleString("en-US",{style:"currency",currency:e.currencyObject==="1"?"USD":"CAD"})} - ${(parseFloat(e.product.price.max)-parseFloat(e.product.price.max)*.2).toLocaleString("en-US",{style:"currency",currency:e.currencyObject==="1"?"USD":"CAD"})}`):(r.value=(u=parseFloat((n=e.product.price)==null?void 0:n.regular))==null?void 0:u.toLocaleString("en-US",{style:"currency",currency:e.currencyObject==="1"?"USD":"CAD"}),l.value=(parseFloat((d=e.product.price)==null?void 0:d.regular)-parseFloat((i=e.product.price)==null?void 0:i.regular)*.2).toLocaleString("en-US",{style:"currency",currency:e.currencyObject==="1"?"USD":"CAD"}),t.value=(parseFloat((p=e.product.sale_price)==null?void 0:p.sale)-parseFloat((a=e.product.sale_price)==null?void 0:a.sale)*.2).toLocaleString("en-US",{style:"currency",currency:e.currencyObject==="1"?"USD":"CAD"})),(t.value===l.value||t.value==="CA$NaN")&&(t.value="")},O=r=>{var i,p;const e=g(""),l=g(""),t=g(""),c=g(!1),n=g([]),u=g(0),d=g(0);return b(m(()=>Promise.resolve().then(()=>_),"s_sm1J0rpxS7Y",[r,n])),b(m(()=>Promise.resolve().then(()=>_),"s_iAPF0sFBFlw",[r])),b(m(()=>Promise.resolve().then(()=>_),"s_ggXBbsYCHn8",[e,r,l,t])),b(m(()=>Promise.resolve().then(()=>_),"s_ly090YGab0I",[c,r])),w("load",m(()=>Promise.resolve().then(()=>_),"s_gc6r19790zg",[u,n,d])),o("a",{class:`btn btn-ghost grid grid-rows-4 justify-items-center items-center md:h-96
      ${r.cardSize==="sm"?"lg:w-52 lg:h-96":" lg:w-72 lg:h-96"} w-44 h-72 md:w-52 bg-[#FFFFFF] shadow-sm shadow-neutral-500 rounded-lg border-2 border-[#D4D4D8] border-solid justify-center normal-case`},{href:S(a=>{var s;return`/products/${encodeURIComponent(((s=a.product.product_name)==null?void 0:s.replace(/[^a-zA-Z0-9 ]/g,"").replace(/ /g,"-").toLowerCase())??"")}-pid-${a.product._id}/`},[r])},[h(P,{layout:"constrained",get src(){var a,s;return(a=(r.product.imgs??[])[0])!=null&&a.includes("http")?(r.product.imgs??[])[0]:(s=(r.product.imgs??[])[0])==null?void 0:s.replace(".","")},onError$:m(()=>import("./q-e466f06e.js"),"s_Kx48xhHzuHA"),get alt(){return r.product.product_name},class:" w-32 h-32 object-contain row-span-2 bg-white rounded-lg",[v]:{alt:S(a=>a.product.product_name,[r]),class:v,layout:v,onError$:v,src:S(a=>{var s,y;return(s=(a.product.imgs??[])[0])!=null&&s.includes("http")?(a.product.imgs??[])[0]:(y=(a.product.imgs??[])[0])==null?void 0:y.replace(".","")},[r])}},3,r.i),o("div",null,null,[o("h2",null,{class:"overflow-hidden truncate lg:text-base text-sm text-black whitespace-normal max-w-40 max-h-14 md:max-h-24 font-semibold pt-5 text-center"},(i=r.product.product_name)!=null&&i.includes("CR")?(p=r.product.product_name)==null?void 0:p.replace(/CR.*/,""):r.product.product_name,1,null),n.value.length>0&&o("div",null,{class:"rating rating-sm rating-half"},Array(5).fill("").map((a,s)=>h(F,{children:[o("input",{class:`
                    ${u.value>=s+.5?"bg-yellow-500":"bg-gray-300"}
                    mask mask-star-2 mask-half-1`},{name:"rating-10",type:"radio"},null,3,null),o("input",{class:`
                    ${u.value>=s+1?"bg-yellow-500":"bg-gray-300"}
                    mask mask-star-2 mask-half-2`},{name:"rating-10",type:"radio"},null,3,null),o("label",{for:`star${s+1}`},null,null,3,null)]},1,"sq_0")),1,"sq_1")],1,null),o("div",null,{class:"flex flex-col gap-2"},c.value?h(F,{children:[o("p",null,{class:"text-xs text-green-700 font-semibold lg:text-base"},"In Stock",3,null),o("p",null,{class:"text-sm text-gray-500 font-semibold lg:text-base"},o("span",null,{class:"text-black"},S(a=>a.value,[e]),3,null),3,null)]},3,"sq_2"):o("p",null,{class:"text-xs text-red-700 font-semibold lg:text-base"},"Out of Stock",3,null),1,null)],1,"sq_3")},$=async()=>{var c;const[r,e]=f(),l=await C(r.product._id??""),t=JSON.parse(l);t.status==="success"&&(e.value=((c=t==null?void 0:t.result)==null?void 0:c.ratings)||[])},k=()=>{var l,t,c;const[r,e]=f();if((((l=e.product)==null?void 0:l.variations)??[]).length>0){for(const n of e.product.variations??[])if(n.quantity_on_hand>0){r.value=!0;break}}else parseInt(((c=(t=e.product)==null?void 0:t.quantity_on_hand)==null?void 0:c.toString())??"0")>0&&(r.value=!0)},_=Object.freeze(Object.defineProperty({__proto__:null,_hW:D,s_4js4ANMwxos:O,s_gc6r19790zg:j,s_ggXBbsYCHn8:A,s_iAPF0sFBFlw:U,s_ly090YGab0I:k,s_sm1J0rpxS7Y:$},Symbol.toStringTag,{value:"Module"}));export{D as _hW,O as s_4js4ANMwxos,j as s_gc6r19790zg,A as s_ggXBbsYCHn8,U as s_iAPF0sFBFlw,k as s_ly090YGab0I,$ as s_sm1J0rpxS7Y};
