import{b as N,n as v,q as i,x as L,l as g,T as S,o as y,P as n,E as o,K as f,M as x,_ as P,h as O,w}from"./q-cea67d7a.js";import{getCart as F,useUserData as M,useGetMainCategories as X,clearUser as b,getWishListServer as E}from"./q-230306ff.js";import{C as Q}from"./q-85815eba.js";import{C as R}from"./q-56a62043.js";import{H as T}from"./q-3a66aa8a.js";import{T as U}from"./q-429712f7.js";import{U as q}from"./q-d713e633.js";import{W as J}from"./q-a4c7b99d.js";import{a as W}from"./q-97996d90.js";import{S as j}from"./q-3c621430.js";const V=async({track:_})=>{var m,u,p;const[r,e,c]=N();_(()=>c==null?void 0:c.user);const l=await F(((m=c==null?void 0:c.user)==null?void 0:m._id)??"");if(r.cart=JSON.parse(l),((p=(u=r==null?void 0:r.cart)==null?void 0:u.products)==null?void 0:p.length)>0){let s=0,d=15;r.cart.currency==="USD"&&e.cur==="2"?(r.cart.products.forEach(t=>{const a=t.price/.9;t.price=Math.round(a*100)/100,t.currency="CAD"}),r.cart.products.forEach(t=>{s+=t.price*t.quantity,d=15})):r.cart.currency==="CAD"&&e.cur==="1"?(r.cart.products.forEach(t=>{const a=t.price*.9;t.price=Math.round(a*100)/100,t.currency="USD"}),r.cart.products.forEach(t=>{t.price=Math.round(t.price*100)/100,s+=t.price*t.quantity,d=15})):r.cart.products.forEach(t=>{t.price=Math.round(t.price*100)/100,s+=t.price*t.quantity,d=15}),r.cart.totalPrice=parseFloat(s.toFixed(2)),r.cart.shipping=parseFloat(d.toFixed(2)),r.cart.totalQuantity=r.cart.products.reduce((t,a)=>t+a.quantity,0),r.cart.currency=e.cur==="1"?"USD":"CAD"}},k=v(i(()=>import("./q-3892de61.js"),"s_XlaB4M2Z3yo")),z=v(i(()=>import("./q-f0d322dd.js"),"s_X4GQDNxTp0s")),A=()=>{var a;L();const _=M(),r=JSON.parse(_.value??"{}"),e=X(),c=g({userId:r._id,cart:{},isVerified:!1}),l=g({wishList:{}}),m=g({...r==null?void 0:r.user,isDummy:r==null?void 0:r.isDummy},{deep:!0}),u=g({cur:r==null?void 0:r.cur}),p=W(),s=(a=p==null?void 0:p.url)==null?void 0:a.pathname;S(i(()=>Promise.resolve().then(()=>C),"s_lROQwus8zWc",[c,u,r])),S(i(()=>Promise.resolve().then(()=>C),"s_6XiVrV7fLco",[r,l])),y(Q,c),y(q,m),y(J,l),y(R,u);const d=i(()=>Promise.resolve().then(()=>C),"s_qRYfnzJEONU"),t=i(()=>Promise.resolve().then(()=>C),"s_ZmpR4PRid8M");return n("div",null,{class:"page flex flex-col gap-6 h-screen"},[n("main",null,null,[s!=="/login/"&&s!=="/register/"&&!s.includes("admin")&&!s.includes("Verify")&&o(P,{children:[o(T,{get countryProp(){return u.cur},[f]:{countryProp:x(h=>h.cur,[u])}},3,"XF_0"),o(U,{handleLogout:t,handleOnCartClick:d,user:r==null?void 0:r.cart,get categories(){return JSON.parse(e.value)},[f]:{categories:x(h=>JSON.parse(h.value),[e]),handleLogout:f,handleOnCartClick:f}},3,"XF_1"),o(z,{get categories(){return JSON.parse(e.value)},[f]:{categories:x(h=>JSON.parse(h.value),[e])}},3,"XF_2")]},1,"XF_3"),o(O,null,3,"XF_4"),s!=="/login/"&&s!=="/register/"&&!s.includes("admin")&&!s.includes("Verify")&&o(k,null,3,"XF_5")],1,null),n("div",null,{class:"section dark"},n("div",null,{class:"container"},null,3,null),3,null)],1,"XF_6")},B=v(i(()=>import("./q-f0d322dd.js"),"s_3P8o8028FzE")),H=()=>n("main",null,{class:"flex flex-col gap-3"},[o(B,null,3,"TQ_0"),n("div",null,{class:"grid grid-cols-7 gap-3 h-full w-full"},[n("div",null,null,o(j,null,3,"TQ_1"),1,null),n("div",null,{class:"col-start-2 col-end-8"},o(O,null,3,"TQ_2"),1,null)],1,null)],1,"TQ_3"),Y=async()=>{await b(),localStorage.removeItem("copon"),location.reload()},Z=async({track:_})=>{var l;const[r,e]=N();_(()=>r==null?void 0:r.user);const c=await E(((l=r==null?void 0:r.user)==null?void 0:l._id)??"");e.wishList=JSON.parse(c)},G=()=>{location.href="/cart/"},I=v(i(()=>import("./q-ad7e22d8.js"),"s_WgMKnRR0QL8")),K=()=>n("div",null,{class:"flex flex-col gap-2 justify-center items-center md:p-5"},[o(I,null,3,"c0_0"),o(O,null,3,"c0_1")],1,"c0_2"),C=Object.freeze(Object.defineProperty({__proto__:null,_hW:w,s_6XiVrV7fLco:Z,s_AkntPXbYBeA:K,s_VkLNXphUh5s:A,s_ZmpR4PRid8M:Y,s_lROQwus8zWc:V,s_qRYfnzJEONU:G,s_ts4AlWNymqQ:H},Symbol.toStringTag,{value:"Module"}));export{w as _hW,Z as s_6XiVrV7fLco,K as s_AkntPXbYBeA,A as s_VkLNXphUh5s,Y as s_ZmpR4PRid8M,V as s_lROQwus8zWc,G as s_qRYfnzJEONU,H as s_ts4AlWNymqQ};
