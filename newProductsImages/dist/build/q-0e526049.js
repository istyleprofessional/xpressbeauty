import{b as v,x as Q,d as E,e as J,P as l,E as f,L as r,M as D,q as d,K as t,A as W,_ as U,w as G}from"./q-cea67d7a.js";import{_auto_goRemoveImgFromDb as K,_auto_goAddMainImg as X,updateVarients as ll,useEditProductData as R,useFormAction as nl,useNewVarientFormAction as el}from"./q-a90d90e7.js";import{E as sl}from"./q-72cd6f96.js";import{K as q,a as al}from"./q-97996d90.js";import{T as M}from"./q-a7e999e2.js";import{useGetMyOrderDetails as tl}from"./q-b3349a3f.js";import{I as ul}from"./q-b432bb9e.js";import{useGetBrandById as il,useUpdateAction as ol}from"./q-fa002619.js";const rl=a=>{var n;const[e]=v();e.variation_name=(n=a.target)==null?void 0:n.value},cl=async a=>{var n;const[e]=v();(n=document.getElementById(a))==null||n.remove(),await K(e,a)},dl=a=>{var n;const[e]=v();e.quantity_on_hand=parseInt((n=a.target)==null?void 0:n.value)},pl=()=>{var e;const[a]=v();(e=document.getElementById(a.variation_id))==null||e.click()},gl=async a=>{var m,w;const[e,n,o]=v(),c=a.target.files[0];if(!c)return;const g=new FormData;g.append("image",c),g.append("name",`${(m=o.product_name)==null?void 0:m.replace(/ /g,"-").replace(/[^a-zA-Z0-9\s]/g,"")}/variations/${e.value.replace(/ /g,"-").replace(/[^a-zA-Z0-9\s]/g,"")}-${c==null?void 0:c.name.split(".")[0]}.webp`),(await(await fetch("/api/admin/product/upload",{method:"POST",body:g})).json()).message===200&&(n.value=`https://xpressbeauty.s3.ca-central-1.amazonaws.com/products-images-2/${(w=o.product_name)==null?void 0:w.replace(/ /g,"-").replace(/[^a-zA-Z0-9\s]/g,"")}/variations/${e.value.replace(/ /g,"-").replace(/[^a-zA-Z0-9\s]/g,"")}-${c==null?void 0:c.name.split(".")[0]}.webp`)},ml=async a=>{var x;const[e,n]=v(),o=a.target.files[0];if(!o)return;const c=new FormData;c.append("image",o),c.append("name",`${(x=n.product_name)==null?void 0:x.replace(/ /g,"-").replace(/[^a-zA-Z0-9\s]/g,"")}/${o==null?void 0:o.name.split(".")[0].replace(/[^a-zA-Z0-9\s]/g,"")}.webp`),(await(await fetch("/api/admin/product/upload",{method:"POST",body:c})).json()).message===200&&(e.value=`https://xpressbeauty.s3.ca-central-1.amazonaws.com/products-images-2/${n.product_name.replace(/ /g,"-").replace(/[^a-zA-Z0-9\s]/g,"")}/${o==null?void 0:o.name.split(".")[0].replace(/[^a-zA-Z0-9\s]/g,"")}.webp`,await X(n,e.value))},vl=async a=>{const[e,n]=v();await ll(a,e.variations)&&(n.value=1,window.location.reload())},wl=a=>{var n;const[e]=v();e.price=parseFloat((n=a.target)==null?void 0:n.value)},hl=()=>{const[a,e]=v();a(e._id)},fl=()=>{var A,N,B,u,O,F,L,H;Q();const a=R(),e=JSON.parse(a.value).product,n=R(),o=JSON.parse(n.value).categories,c=R(),g=JSON.parse(c.value).brands,b=nl(),x=el(),m=E((e==null?void 0:e.imgs[0])??""),w=E(""),y=E(""),S=E((e==null?void 0:e.description)??""),k=E(0),C=E(0);J(d(()=>Promise.resolve().then(()=>p),"s_BMY4VEwYsdo",[S]));const j=d(()=>Promise.resolve().then(()=>p),"s_9QazHOpSPys",[m,e]),T=d(()=>Promise.resolve().then(()=>p),"s_S0hfBeu3CCk",[y,w,e]),P=d(()=>Promise.resolve().then(()=>p),"s_zoi3nrUF9OE",[C,k]),$=d(()=>Promise.resolve().then(()=>p),"s_m1Ua9oh4tTo",[e,k]),I=d(()=>Promise.resolve().then(()=>p),"s_o34U2Wc3K6o"),z=d(()=>Promise.resolve().then(()=>p),"s_GSI0BUzt0Hc"),V=d(()=>Promise.resolve().then(()=>p),"s_JfWjYDh0bQY",[e]);return l("div",null,{class:"flex h-full w-full flex-col bg-[#F9FAFB]"},[l("script",null,{referrerPolicy:"origin",src:"https://cdn.tiny.cloud/1/7d7c50ku3fuvbrrbjft38fdtt26o51zx0iwuab7hlwexhgr9/tinymce/5/tinymce.min.js"},null,3,null),b.isRunning&&f(U,{children:l("div",null,{class:"fixed inset-x-0 inset-y-0 z-20 m-auto w-full drop-shadow-lg backdrop-blur-lg backdrop-brightness-75 "},l("progress",null,{class:"progress progress-secondary fixed inset-x-0 inset-y-0 z-20 m-auto w-56 bg-black"},null,3,null),3,null)},3,"N0_0"),((A=b.value)==null?void 0:A.status)==="success"&&f(M,{handleClose:P,index:1,message:"Product Updated Successfully",status:"s",[t]:{handleClose:t,index:t,message:t,status:t}},3,"N0_1"),f(q,{action:b,children:[l("div",null,{class:"flex w-full flex-row justify-between"},[l("input",{value:e==null?void 0:e._id},{name:"_id",type:"hidden"},null,3,null),l("input",{value:e==null?void 0:e.priceType},{name:"priceType",type:"hidden"},null,3,null),l("h1",null,{class:"p-2 text-2xl font-bold text-[#6B7280]"},["Edit ",l("span",null,{class:"text-[#7C3AED]"},r(e,"product_name"),1,null)," ","Product"],1,null),l("div",null,{class:"flex flex-row items-center gap-2"},[l("button",{disabled:e.priceType=="single"},{"aria-controls":"drawer-right-example2",class:"border-1 btn btn-ghost btn-sm w-40 border-black text-[#7C3AED]","data-drawer-placement":"right","data-drawer-show":"drawer-right-example2","data-drawer-target":"drawer-right-example2",type:"button"},"Add Variant",3,null),l("button",{disabled:e.priceType=="single"},{"aria-controls":"drawer-right-example",class:"border-1 btn btn-ghost btn-sm w-40 border-black text-[#7C3AED]","data-drawer-placement":"right","data-drawer-show":"drawer-right-example","data-drawer-target":"drawer-right-example",type:"button"},"Manage Variant",3,null),l("button",null,{class:"btn btn-sm w-40 bg-[#7C3AED] text-white",type:"submit"},"Save",3,null)],1,null)],1,null),l("div",null,{class:"flex h-full w-full flex-col gap-10 bg-[#FFF] p-6"},[l("div",null,{class:"grid grid-cols-9"},[l("p",null,{class:"col-span-1"},"Image",3,null),l("div",null,{class:"col-span-3 flex flex-col gap-2"},[l("img",null,{alt:"",class:"h-24 w-24",src:D(s=>s.value,[m])},null,3,null),l("input",null,{class:"file-input file-input-bordered file-input-sm  w-full max-w-xs",onChange$:j,type:"file"},null,3,null),l("input",null,{name:"product_image",type:"hidden",value:D(s=>s.value,[m])},null,3,null)],3,null),l("p",null,{class:"col-span-1"},"Preview",3,null),l("div",null,{class:"col-span-4 flex flex-wrap gap-2"},(((N=e.imgs)==null?void 0:N.length)??0)>1&&((B=e.imgs)==null?void 0:B.map((s,i)=>l("div",{id:s},{class:"flex flex-col"},[l("svg",{onClick$:d(()=>Promise.resolve().then(()=>p),"s_kTS2vX0Ldc4",[V,s])},{"aria-hidden":"true",class:"mx-1 my-1 h-6 w-6 cursor-pointer self-center rounded-sm bg-gray-100 text-gray-800 shadow dark:text-white",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},l("path",null,{d:"M5 12h14",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,3,null),2,null),l("img",{src:s},{alt:"Product Image",class:"h-24 w-24 max-w-full rounded-lg border-2 border-gray-300 object-contain object-center p-3",height:24,width:24},null,3,null)],1,i))),1,null)],1,null),l("div",null,{class:"grid grid-cols-9"},l("div",null,{class:"col-span-9 ml-[139px]  "},f(sl,{get product_name(){return e.product_name},[t]:{product_name:W(e,"product_name")}},3,"N0_2"),1,null),1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Product Name",3,null),l("input",{value:r(e,"product_name")},{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"product_name",type:"text"},null,3,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[e.priceType==="range"&&f(U,{children:[l("p",null,{class:"col-span-1"},"Price Range",3,null),l("div",null,{class:"col-span-3 flex flex-row items-center gap-2"},[l("input",{value:r(e.price,"min")},{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"price.min",type:"text"},null,3,null),l("p",null,{class:"col-span-1"},"-",3,null),l("input",{value:r(e.price,"max")},{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"price.max",type:"text"},null,3,null)],1,null)]},1,"N0_3"),e.priceType==="single"&&f(U,{children:[l("p",null,{class:"col-span-1"},"Price",3,null),l("input",{value:(u=e.price)==null?void 0:u.regular},{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"price.regular",type:"text"},null,3,null)]},1,"N0_4")],1,null),l("div",null,{class:"grid grid-cols-4"},[e.priceType==="range"&&f(U,{children:[l("p",null,{class:"col-span-1"},"Sale Price Range",3,null),l("div",null,{class:"col-span-3 flex flex-row items-center gap-2"},[l("input",{value:r(e.sale_price,"min")},{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"sale_price.min",type:"text"},null,3,null),l("p",null,{class:"col-span-1"},"-",3,null),l("input",{value:r(e.sale_price,"max")},{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"sale_price.max",type:"text"},null,3,null)],1,null)]},1,"N0_5"),e.priceType==="single"&&f(U,{children:[l("p",null,{class:"col-span-1"},"Sale Price",3,null),l("input",{value:r(e.sale_price,"sale")},{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"sale_price.sale",type:"text"},null,3,null)]},1,"N0_6")],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Category",3,null),l("select",null,{class:"select w-full max-w-xs",name:"category"},[l("option",{selected:e.categories.length===0},{disabled:!0},"Pick product main category",3,null),(O=o.result)==null?void 0:O.reduce((s,i)=>(s.some(_=>i.main===_.main)||s.push(i),s),[]).sort((s,i)=>s.main-i.main).map((s,i)=>l("option",{selected:e.categories.some(h=>h.main===s.main),value:r(s,"main")},null,s.main,1,i))],1,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Sub Category",3,null),l("select",null,{class:"select w-full max-w-xs",name:"sub-category"},[l("option",{selected:e.categories.length===0},{disabled:!0},"Pick product sub category",3,null),(F=o.result)==null?void 0:F.reduce((s,i)=>(s.some(_=>(i==null?void 0:i.name)===(_==null?void 0:_.name))||s.push(i),s),[]).sort((s,i)=>{var h;return(h=s==null?void 0:s.name)==null?void 0:h.localeCompare(i==null?void 0:i.name)}).map((s,i)=>l("option",{selected:e.categories.some(h=>(h==null?void 0:h.name)===(s==null?void 0:s.name)),value:s==null?void 0:s.name},null,s==null?void 0:s.name,1,i))],1,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Brand",3,null),l("select",null,{class:"select w-full max-w-xs",name:"companyName.name"},[l("option",{selected:!((L=e.companyName)!=null&&L.name)},{disabled:!0},"Pick product brand",3,null),(H=g.result)==null?void 0:H.reduce((s,i)=>(s.some(_=>{var Y,Z;return((Y=i==null?void 0:i.name)==null?void 0:Y.toLowerCase())===((Z=_==null?void 0:_.name)==null?void 0:Z.toLowerCase())})||s.push(i),s),[]).sort((s,i)=>s==null?void 0:s.name.localeCompare(i==null?void 0:i.name)).map((s,i)=>{var h;return l("option",{selected:((h=e.companyName)==null?void 0:h.name)===(s==null?void 0:s.name),value:s==null?void 0:s.name},null,s==null?void 0:s.name,1,i)})],1,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Description",3,null),l("textarea",null,{id:"mytextarea",value:D(s=>s.value,[S])},null,3,null),l("input",null,{name:"description",type:"hidden",value:D(s=>s.value,[S])},null,3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Item No.",3,null),l("input",{value:r(e,"item_no")},{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"item_no",type:"text"},null,3,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"SKU",3,null),l("input",{value:e==null?void 0:e.sku},{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"sku",type:"text"},null,3,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Quantity on hand",3,null),l("input",{value:e==null?void 0:e.quantity_on_hand},{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"quantity_on_hand",type:"text"},null,3,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Barcode value",3,null),l("input",{value:e==null?void 0:e.bar_code_value},{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"bar_code_value",type:"text"},null,3,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Status",3,null),l("select",null,{class:"select w-full max-w-xs",name:"status"},[l("option",{selected:!e.status},{disabled:!0},"Pick product status",3,null),l("option",{selected:e.status==="Normal"},{value:"Normal"},"Normal",3,null),l("option",{selected:e.status==="New Arrival"},{value:"New Arrival"},"New Arrival",3,null),l("option",{selected:e.status==="Hot Sale"},{value:"Hot Sale"},"Hot Sale",3,null)],1,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Visibility",3,null),l("select",null,{class:"select w-full max-w-xs",name:"isHidden"},[l("option",null,{disabled:!0},"Pick product visibility",3,null),l("option",{selected:!e.isHidden},{value:"false"},"Active",3,null),l("option",{selected:r(e,"isHidden")},{value:"true"},"In Active",3,null)],1,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Update Using QuickBooks",3,null),l("input",{checked:r(e,"updateQuickBooks")},{class:"form-checkbox h-5 w-5 text-[#7C3AED]",name:"updateQuickBooks",type:"checkbox"},null,3,null)],1,null)],1,null)],[t]:{action:t}},1,"N0_7"),l("div",null,{class:"bg-[#fff]"},l("div",null,{class:"flex flex-row justify-between gap-2 p-2"},l("dialog",null,{class:"modal",id:"my_modal_1"},l("div",null,{class:"modal-box"},[l("h3",null,{class:"text-lg font-bold"},"Change Product Visibility!",3,null),l("p",null,{class:"py-4"},"Are you sure you want change ",3,null),l("div",null,{class:"modal-action"},l("form",null,{class:"flex gap-2",method:"dialog"},[l("button",null,{class:"btn"},"Close",3,null),l("button",null,{class:"btn btn-primary"},"Confirm",3,null)],3,null),3,null)],3,null),3,null),3,null),3,null),l("div",null,{"aria-labelledby":"drawer-right-label",class:"fixed right-0 top-0 z-40 h-screen w-1/2 translate-x-full overflow-y-auto bg-gray-50 p-4 transition-transform dark:bg-gray-800",id:"drawer-right-example"},[k.value===1&&l("div",null,{class:"w-5/6"},f(M,{handleClose:P,index:1,message:"Prices Updated Successfully",status:"s",[t]:{handleClose:t,index:t,message:t,status:t}},3,"N0_8"),1,"N0_9"),l("h5",null,{class:"mb-4 inline-flex items-center text-base font-semibold text-gray-500 dark:text-gray-400",id:"drawer-right-label"},[l("svg",null,{"aria-hidden":"true",class:"me-2.5 h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},l("path",null,{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"},null,3,null),3,null),"Variations"],3,null),l("button",null,{"aria-controls":"drawer-right-example",class:"absolute end-2.5 top-2.5 inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white","data-drawer-hide":"drawer-right-example",type:"button"},[l("svg",null,{"aria-hidden":"true",class:"h-3 w-3",fill:"none",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},l("path",null,{d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,3,null),3,null),l("span",null,{class:"sr-only"},"Close menu",3,null)],3,null),l("div",null,{class:"mb-6 flex items-end justify-end"},l("button",{onClick$:d(()=>Promise.resolve().then(()=>p),"s_Kefm4Sw60kM",[$,e])},{class:"btn btn-sm mr-6 w-40 bg-[#7C3AED] text-white"},"Save",2,null),1,null),l("div",null,{class:"relative h-5/6 overflow-x-auto overflow-y-auto shadow-md sm:rounded-lg"},l("table",null,{class:"w-full text-left text-sm text-gray-500 rtl:text-right dark:text-gray-400"},[l("thead",null,{class:"text-xs uppercase text-gray-700 dark:text-gray-400"},l("tr",null,null,[l("th",null,{class:"bg-gray-50 px-2 py-1 dark:bg-gray-800",scope:"col"},"Product name",3,null),l("th",null,{class:"px-2 py-1",scope:"col"},"Price",3,null),l("th",null,{class:"px-2 py-1",scope:"col"},"Quantity",3,null)],3,null),3,null),l("tbody",null,null,e.variations.map((s,i)=>l("tr",null,{class:"border-b border-gray-200 dark:border-gray-700"},[l("th",null,{class:"whitespace-nowrap bg-gray-50 px-2 py-1 font-medium text-gray-900 dark:bg-gray-800 dark:text-white",scope:"row"},l("input",{onChange$:d(()=>Promise.resolve().then(()=>p),"s_Iy3GxQqrTQI",[s]),value:r(s,"variation_name")},{class:"input input-md col-span-3 w-full border-[1px] text-black border-[#D1D5DB]",type:"text"},null,2,null),1,null),l("td",null,{class:"px-2 py-1"},l("input",{onChange$:d(()=>Promise.resolve().then(()=>p),"s_jhds5GvWyj8",[s]),value:r(s,"price")},{class:"input input-md col-span-3 w-full border-[1px] text-black border-[#D1D5DB]",type:"number"},null,2,null),1,null),l("td",null,{class:"px-2 py-1"},l("input",{onChange$:d(()=>Promise.resolve().then(()=>p),"s_hu1TqRAbaxA",[s]),value:r(s,"quantity_on_hand")},{class:"input input-md col-span-3 w-full border-[1px] text-black border-[#D1D5DB]",type:"number"},null,2,null),1,null),l("td",null,{class:"px-2 py-1"},[l("img",{id:`${s.variation_id}img`,onClick$:d(()=>Promise.resolve().then(()=>p),"s_3NpuowB0bBA",[s]),onError$:d(()=>Promise.resolve().then(()=>p),"s_nJVvhvYwCJY",[i,e]),src:r(s,"variation_image")},{alt:"",class:"h-10 w-10 cursor-pointer rounded",height:10,width:10},null,2,null),l("input",{id:r(s,"variation_id"),onChange$:d(()=>Promise.resolve().then(()=>p),"s_yfwktvqMkLA",[z,s])},{class:"file-input file-input-bordered file-input-sm  w-full max-w-xs",hidden:!0,type:"file"},null,2,null)],1,null)],1,i)),1,null)],1,null),1,null)],1,null),l("div",null,{"aria-labelledby":"drawer-right-label",class:"fixed right-0 top-0 z-40 h-screen w-1/2 translate-x-full overflow-y-auto bg-gray-50 p-4 transition-transform dark:bg-gray-800",id:"drawer-right-example2"},[C.value===1&&l("div",null,{class:"w-5/6"},f(M,{handleClose:P,index:1,message:"Added Successfully",status:"s",[t]:{handleClose:t,index:t,message:t,status:t}},3,"N0_10"),1,"N0_11"),l("h5",null,{class:"mb-4 inline-flex items-center text-base font-semibold text-gray-500 dark:text-gray-400",id:"drawer-right-label"},[l("svg",null,{"aria-hidden":"true",class:"me-2.5 h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},l("path",null,{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"},null,3,null),3,null),"Add variation"],3,null),l("button",null,{"aria-controls":"drawer-right-example2",class:"absolute end-2.5 top-2.5 inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900 dark:hover:bg-gray-600 dark:hover:text-white","data-drawer-hide":"drawer-right-example2",type:"button"},[l("svg",null,{"aria-hidden":"true",class:"h-3 w-3",fill:"none",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},l("path",null,{d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,3,null),3,null),l("span",null,{class:"sr-only"},"Close menu",3,null)],3,null),l("div",null,{class:"relative h-5/6 overflow-x-auto overflow-y-auto shadow-md   sm:rounded-lg"},f(q,{action:x,children:[l("div",null,{class:"flex w-full flex-row justify-between"},[l("input",{value:e==null?void 0:e._id},{name:"_id",type:"hidden"},null,3,null),l("div",null,{class:"mb-4 flex w-full items-end justify-end gap-2"},l("button",null,{class:"btn btn-sm w-40 bg-[#7C3AED] text-white",onClick$:d(()=>Promise.resolve().then(()=>p),"s_ni5Cl77Mj8A",[C]),type:"submit"},"Save",3,null),3,null)],1,null),l("div",null,{class:"flex h-full w-full flex-col gap-2 bg-gray-50 p-6"},[l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Variation Name",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"variation_name",onChange$:d(()=>Promise.resolve().then(()=>p),"s_ze90l463Amk",[y]),type:"text"},null,3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Price",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"price",type:"number"},null,3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Pro Price",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"wholesale_price",type:"number"},null,3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Quantity on hand",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"quantity_on_hand",type:"number"},null,3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"UPC",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"upc",type:"text"},null,3,null)],3,null),l("div",null,{class:"col-span-3 flex flex-col gap-2"},[l("img",null,{alt:"",class:"h-24 w-24",src:D(s=>s.value,[w])},null,3,null),l("input",null,{class:"file-input file-input-bordered file-input-sm  w-full max-w-xs",disabled:D(s=>s.value.length<1,[y]),onChange$:T,type:"file"},null,3,null),l("input",null,{name:"variation_image",type:"hidden",value:D(s=>s.value,[w])},null,3,null)],3,null)],3,null)],onSubmitCompleted$:I,reloadDocument:!1,[t]:{action:t,onSubmitCompleted$:t,reloadDocument:t}},1,"N0_12"),1,null)],1,null)],1,"N0_13")},bl=a=>{const[e]=v();return e.value=a.target.value},xl=async(a,e)=>{const n=a.target.files[0];if(!n)return;const o=new FormData;o.append("image",n),o.append("name",`${e.variation_name.replace(/ /g,"-")}/${n==null?void 0:n.name.split(".")[0]}.webp`),(await(await fetch("/api/admin/product/upload",{method:"POST",body:o})).json()).message===200&&(e.variation_image=`https://xpressbeauty.s3.ca-central-1.amazonaws.com/products-images-2/${e.variation_name.replace(/ /g,"-")}/${n==null?void 0:n.name.split(".")[0]}.webp`,document.getElementById(e.variation_id+"img").src=e.variation_image)},yl=()=>{var b,x,m,w,y,S,k,C,j,T,P,$,I,z,V,A,N,B;const a=tl(),n=JSON.parse(a.value??"[]").data._doc,o=(parseFloat(n.totalPrice)>200,parseFloat(n.totalPrice)-parseFloat(n.totalPrice)*.13),c=parseFloat(n.totalPrice)*.13,g=new Date(n.createdAt);return l("div",null,{class:"card shadow-lg"},l("div",null,{class:"card-body justify-center "},[l("div",null,{class:"flex flex-col gap-2 justify-center"},[l("div",null,null,l("span",null,{class:"font-bold text-black text-xl uppercase"},["Order No: ",r(n,"order_number")],1,null),1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Order Number:",3,null),3,null),l("div",null,{class:"md:pt-6"},l("span",null,{class:"font-bold uppercase"},r(n,"order_number"),1,null),1,null)],1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Order Date:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},g.toLocaleString("en-US",{timeZone:"America/Toronto"}),1,null),1,null)],1,null)],1,null),l("div",null,{class:"flex flex-col gap-2 justify-center  py-8"},[l("div",null,null,l("span",null,{class:"font-bold text-black text-xl "},["Shipping Details:"," "],3,null),3,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Address:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},[l("span",null,null,[r(n.shippingAddress,"addressLine1")," "],1,null),l("span",null,null,[r(n.shippingAddress,"postalCode")," "],1,null),l("span",null,null,[r(n.shippingAddress,"city")," "],1,null),l("span",null,null,[r(n.shippingAddress,"country")," "],1,null)],1,null),1,null)],1,null)],1,null),l("div",null,{class:"flex flex-col gap-2 justify-center  py-8"},[l("div",null,null,l("span",null,{class:"font-bold text-black text-xl "},"Payment Details:",3,null),3,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Subtotal:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},o.toLocaleString("en-US",{style:"currency",currency:(n==null?void 0:n.currency)??"USD"}),1,null),1,null)],1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Tax",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},((w=(b=n==null?void 0:n.totalInfo)==null?void 0:b.tax)==null?void 0:w.toLocaleString("en-US",{style:"currency",currency:((m=(x=n==null?void 0:n.totalInfo)==null?void 0:x.currency)==null?void 0:m.toUpperCase())??"USD"}))??c.toLocaleString("en-US",{style:"currency",currency:((y=n==null?void 0:n.currency)==null?void 0:y.toUpperCase())??"USD"}),1,null),1,null)],1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Shipping:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},((j=(S=n==null?void 0:n.totalInfo)==null?void 0:S.shipping)==null?void 0:j.toLocaleString("en-US",{style:"currency",currency:((C=(k=n==null?void 0:n.totalInfo)==null?void 0:k.currency)==null?void 0:C.toUpperCase())??"USD"}))??"$15.00",1,null),1,null)],1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Total:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},((I=(T=n==null?void 0:n.totalInfo)==null?void 0:T.finalTotal)==null?void 0:I.toLocaleString("en-US",{style:"currency",currency:(($=(P=n==null?void 0:n.totalInfo)==null?void 0:P.currency)==null?void 0:$.toUpperCase())??"USD"}))??((V=n==null?void 0:n.totalPrice)==null?void 0:V.toLocaleString("en-US",{style:"currency",currency:((z=n==null?void 0:n.currency)==null?void 0:z.toUpperCase())??"USD"})),1,null),1,null)],1,null)],1,null),l("div",null,{class:"flex flex-col gap-2 justify-center    "},[l("div",null,null,l("span",null,{class:"font-bold text-black text-xl "},"Product Details:",3,null),3,null),n.products.map((u,O)=>{var F;return l("div",null,{class:"border border-[#ced4da] shadow-md rounded-md py-6   "},[l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Product Image:",3,null),3,null),l("div",null,{class:""},l("img",{alt:r(u,"product_name"),src:r(u,"product_img")},{class:"w-20 h-20 object-contain"},null,3,null),1,null)],1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Product Name:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},r(u,"product_name"),1,null),1,null)],1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Product Variation:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},r(u,"variation_name"),1,null),1,null)],1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Product Price:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},(F=u.price)==null?void 0:F.toLocaleString("en-US",{style:"currency",currency:(n==null?void 0:n.currency)??"USD"}),1,null),1,null)],1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Quanitity:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},r(u,"quantity"),1,null),1,null)],1,null),(u==null?void 0:u.status)&&l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Product Status:",3,null),3,null),l("div",null,{class:""},l("p",{class:`badge badge-sm ${(u==null?void 0:u.status)==="Pending"?"bg-[#FEF9C3] text-[#CA8A04]":(u==null?void 0:u.status)==="Shipped"?"bg-[#E0F2FE] text-[#0EA5E9]":(u==null?void 0:u.status)==="Completed"?"bg-[#C6F6D5] text-[#059669]":(u==null?void 0:u.status)==="Cancelled"||(u==null?void 0:u.status)==="Refunded"?"bg-[#FED7D7] text-[#E53E3E]":(u==null?void 0:u.status)==="Processing"?"bg-lime-300 text-lime-800":"bg-[#FED7D7] text-[#E53E3E]"} text-sm`},null,u==null?void 0:u.status,1,null),1,null)],1,"aR_0")],1,O)})],1,null),(n==null?void 0:n.trackinginfo)&&l("div",null,{class:"flex flex-col gap-2 justify-center  py-8"},[l("div",null,null,l("span",null,{class:"font-bold text-black text-xl "},"Shipping Details:",3,null),3,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Shipping Company:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},((A=n==null?void 0:n.trackinginfo)==null?void 0:A.companyName)??"",1,null),1,null)],1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Tracking Number:",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},((N=n==null?void 0:n.trackinginfo)==null?void 0:N.link)??"",1,null),1,null)],1,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Tracking Url",3,null),3,null),l("div",null,{class:""},l("span",null,{class:"font-bold"},l("a",{href:((B=n==null?void 0:n.trackinginfo)==null?void 0:B.trackingNumber)??""},{class:"text-blue-500",target:"_blank"},"Click here",3,null),1,null),1,null)],1,null)],1,"aR_1"),n.orderStatus&&l("div",null,{class:"flex flex-col gap-2 justify-center  py-8"},[l("div",null,null,l("span",null,{class:"font-bold text-black text-xl "},"Order Status:",3,null),3,null),l("div",null,{class:"grid grid-flow-row-dense gap-3 pl-6 md:grid-cols-4 grid-cols-2"},[l("div",null,{class:""},l("span",null,null,"Order Status:",3,null),3,null),l("div",null,{class:""},l("p",{class:`badge badge-lg ${n.orderStatus==="Pending"?"bg-[#FEF9C3] text-[#CA8A04]":n.orderStatus==="Shipped"?"bg-[#E0F2FE] text-[#0EA5E9]":n.orderStatus==="Completed"?"bg-[#C6F6D5] text-[#059669]":n.orderStatus==="Cancelled"||n.orderStatus==="Refunded"?"bg-[#FED7D7] text-[#E53E3E]":n.orderStatus==="Processing"?"bg-lime-300 text-lime-800":"bg-[#FED7D7] text-[#E53E3E]"} text-lg`},null,r(n,"orderStatus"),1,null),1,null)],1,null)],1,"aR_2")],1,null),1,"aR_3")},_l=()=>{var g,b,x;Q();const a=JSON.parse(il().value??"{}"),n=al().params.id,o=ol(),c=d(()=>Promise.resolve().then(()=>p),"s_zY2h8W1DUeY");return l("div",null,null,[l("div",null,{class:"flex flex-col w-full h-full bg-[#F9FAFB]"},l("h1",null,{class:"text-2xl font-bold p-2"},["Edit ",(g=a==null?void 0:a.result)==null?void 0:g.name],1,null),1,null),f(q,{action:o,children:[l("button",null,{class:"btn text-white w-56 bg-[#7C3AED]",type:"submit"},[" ","Save"," "],3,null),f(ul,{label:"Name",placeholder:"Name",get validation(){var m,w;return(w=(m=o==null?void 0:o.value)==null?void 0:m.validation)==null?void 0:w.name},identifier:"name",type:"text",value:(b=a==null?void 0:a.result)==null?void 0:b.name,[t]:{identifier:t,label:t,placeholder:t,type:t,validation:D(m=>{var w,y;return(y=(w=m==null?void 0:m.value)==null?void 0:w.validation)==null?void 0:y.name},[o])}},3,"bp_0"),l("input",{value:n},{name:"id",type:"hidden"},null,3,null)],reloadDocument:!1,[t]:{action:t,reloadDocument:t}},1,"bp_1"),((x=o.value)==null?void 0:x.status)==="success"&&f(M,{handleClose:c,index:1,message:"Brand Name Updated Successfully",status:"s",[t]:{handleClose:t,index:t,message:t,status:t}},3,"bp_2")],1,"bp_3")},Dl=a=>{var g;const[e,n]=v(),c=`https://xpressbeauty.s3.ca-central-1.amazonaws.com/products-images-2/${(g=n.product_name)==null?void 0:g.replace(/[^A-Za-z0-9]+/g,"")}/variation/variation-image-${e}.webp`;a.target.src=c},Sl=()=>{window.location.reload()},kl=a=>{const[e,n]=v();e(a,n)},Cl=()=>{const[a]=v();a.value=1},Pl=()=>{const[a,e]=v();return a(e)},El=()=>{var e,n,o;const[a]=v();(e=window==null?void 0:window.tinymce)==null||e.init({selector:"#mytextarea",height:300,width:800,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}),(o=(n=window==null?void 0:window.tinymce)==null?void 0:n.activeEditor)==null||o.on("change",()=>{var c,g;a.value=(g=(c=window==null?void 0:window.tinymce)==null?void 0:c.activeEditor)==null?void 0:g.getContent()})},Al=()=>{var n;const[a,e]=v();(n=document.querySelector(".alert"))==null||n.classList.add("hidden"),e.value=0,a.value=0},Nl=()=>{var a;(a=document.querySelector(".alert"))==null||a.classList.add("hidden")},p=Object.freeze(Object.defineProperty({__proto__:null,_hW:G,s_3NpuowB0bBA:pl,s_9QazHOpSPys:ml,s_BMY4VEwYsdo:El,s_Bed470W5B48:_l,s_GSI0BUzt0Hc:xl,s_Iy3GxQqrTQI:rl,s_JfWjYDh0bQY:cl,s_Kefm4Sw60kM:hl,s_S0hfBeu3CCk:gl,s_SN79MFHL0E4:fl,s_hu1TqRAbaxA:dl,s_jhds5GvWyj8:wl,s_kTS2vX0Ldc4:Pl,s_m1Ua9oh4tTo:vl,s_nJVvhvYwCJY:Dl,s_ni5Cl77Mj8A:Cl,s_o34U2Wc3K6o:Sl,s_vXMsjE8yEoc:yl,s_yfwktvqMkLA:kl,s_zY2h8W1DUeY:Nl,s_ze90l463Amk:bl,s_zoi3nrUF9OE:Al},Symbol.toStringTag,{value:"Module"}));export{G as _hW,pl as s_3NpuowB0bBA,ml as s_9QazHOpSPys,El as s_BMY4VEwYsdo,_l as s_Bed470W5B48,xl as s_GSI0BUzt0Hc,rl as s_Iy3GxQqrTQI,cl as s_JfWjYDh0bQY,hl as s_Kefm4Sw60kM,gl as s_S0hfBeu3CCk,fl as s_SN79MFHL0E4,dl as s_hu1TqRAbaxA,wl as s_jhds5GvWyj8,Pl as s_kTS2vX0Ldc4,vl as s_m1Ua9oh4tTo,Dl as s_nJVvhvYwCJY,Cl as s_ni5Cl77Mj8A,Sl as s_o34U2Wc3K6o,yl as s_vXMsjE8yEoc,kl as s_yfwktvqMkLA,Nl as s_zY2h8W1DUeY,bl as s_ze90l463Amk,Al as s_zoi3nrUF9OE};
