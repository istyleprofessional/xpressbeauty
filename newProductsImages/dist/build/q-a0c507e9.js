import{b as p,x as L,d as f,e as y,E as h,P as e,K as a,M as m,q as c,_ as A,w as P}from"./q-cea67d7a.js";import{g as I}from"./q-46496603.js";import{e as O,K as S}from"./q-97996d90.js";import{T as _}from"./q-a7e999e2.js";import{useVerifyToken as $,useFormAction as T}from"./q-1cd46013.js";const R=({track:l})=>{var s;const[u,t,i]=p();if(l(()=>{var o;return(o=u.value)==null?void 0:o.status}),t.value=!1,((s=u.value)==null?void 0:s.status)==="success"){window.location.href="/login";return}else window.grecaptcha.ready(async()=>{const o=await window.grecaptcha.execute("6Lc3M80jAAAAAJcoRLiwoul9szk5DYiYx9VIR2HE",{action:"submit"});i.value=o});t.value=!1},C=()=>{const[l]=p();return l.value=!0},V=({track:l,cleanup:u})=>{const[t,i]=p();l(()=>i.value),l(()=>t.value);const s=setTimeout(()=>{t.value="",i.value=""},3e3);u(()=>{clearTimeout(s)})},E=async()=>{const[l,u,t,i]=p(),s=await I(`/api/emailOtp/resend?token=${u.token}&recaptcha=${t.value}`),o=await(s==null?void 0:s.json());o.status==="success"&&(i.value="OTP sent successfully"),o.status==="failed"&&(l.value=(o==null?void 0:o.message)??"Something went wrong")},N=()=>{var l;(l=document.querySelector(".alert"))==null||l.classList.add("hidden")},U=()=>{var b;L();const l=f(!1),u=f(""),t=f(""),i=$(),s=JSON.parse(i.value??"{}"),o=f(),x=f(""),r=T(),k=O();y(c(()=>Promise.resolve().then(()=>d),"s_8i4nnM4jvgU",[r,l,x]),{strategy:"document-idle"});const g=c(()=>Promise.resolve().then(()=>d),"s_k40xi5P0Srk"),M=c(()=>Promise.resolve().then(()=>d),"s_8vlomV0MQUY",[u,s,x,t]),v=c(()=>Promise.resolve().then(()=>d),"s_2N3r0qf3umU");y(c(()=>Promise.resolve().then(()=>d),"s_thRw3kmiuzI",[u,t]));const j=c(()=>Promise.resolve().then(()=>d),"s_R9XnN0hiGZM",[k]);return h(A,{children:e("div",null,{class:"relative flex min-h-screen flex-col justify-center overflow-hidden bg-gray-50 py-12"},e("div",null,{class:"relative bg-white px-6 pt-10 pb-9 shadow-xl mx-auto w-full max-w-lg rounded-2xl"},[((b=r==null?void 0:r.value)==null?void 0:b.err)&&e("div",null,{class:"w-full mb-10"},h(_,{handleClose:v,status:"e",get message(){var n;return(n=r==null?void 0:r.value)==null?void 0:n.err},index:1,[a]:{handleClose:a,index:a,message:m(n=>{var w;return(w=n==null?void 0:n.value)==null?void 0:w.err},[r]),status:a}},3,"1O_0"),1,"1O_1"),t.value&&e("div",null,{class:"w-full mb-10"},h(_,{handleClose:v,status:"s",get message(){return t.value},index:1,[a]:{handleClose:a,index:a,message:m(n=>n.value,[t]),status:a}},3,"1O_2"),1,"1O_3"),e("div",null,{class:"mx-auto flex w-full max-w-md flex-col space-y-16"},[e("div",null,{class:"flex flex-col items-center justify-center text-center space-y-2"},[e("div",null,{class:"font-semibold text-3xl"},e("p",null,null,"Email Verification",3,null),3,null),e("div",null,{class:"flex flex-row text-sm font-medium text-gray-400"},e("p",null,null,["We have sent a code to your email ",(s==null?void 0:s.user.email)??""],1,null),1,null)],1,null),e("script",null,{src:"https://www.google.com/recaptcha/api.js?render=6Lc3M80jAAAAAJcoRLiwoul9szk5DYiYx9VIR2HE"},null,3,null),h(S,{action:r,children:e("div",null,{class:"flex flex-col space-y-16"},[e("div",{ref:o},{class:"flex flex-row items-center justify-between mx-auto gap-3 w-full max-w-xs",id:"inputs"},[e("input",null,{class:"w-full h-16 flex flex-col items-center justify-center text-center px-5   outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700",inputMode:"numeric",maxLength:1,name:"otp.0",onInput$:g,type:"text"},null,3,null),e("input",null,{class:"w-full h-16 flex flex-col items-center justify-center text-center px-5    outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700",inputMode:"numeric",maxLength:1,name:"otp.1",onInput$:g,type:"text"},null,3,null),e("input",null,{class:"w-full h-16 flex flex-col items-center justify-center text-center px-5   outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700",inputMode:"numeric",maxLength:1,name:"otp.2",onInput$:g,type:"text"},null,3,null),e("input",null,{class:"w-full h-16 flex flex-col items-center justify-center text-center px-5    outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700",inputMode:"numeric",maxLength:1,name:"otp.3",onInput$:g,type:"text"},null,3,null),e("input",null,{class:"w-full h-16 flex flex-col items-center justify-center text-center px-5    outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700",inputMode:"numeric",maxLength:1,name:"otp.4",onInput$:g,type:"text"},null,3,null),e("input",null,{id:"recaptcha",name:"recaptcha",type:"hidden",value:m(n=>n.value,[x])},null,3,null)],3,null),e("div",null,{class:"flex flex-col space-y-5"},[e("div",null,null,e("button",null,{class:"btn text-center w-full border   rounded-xl outline-none bg-black border-none text-white shadow-sm",disabled:m(n=>n.value.length===0,[x]),onClick$:c(()=>Promise.resolve().then(()=>d),"s_H4wBxGy5wBk",[l]),type:"submit"},[l.value&&e("span",null,{class:"loading loading-spinner-white"},null,3,"1O_4"),"Verify Account"],1,null),1,null),e("div",null,{class:"flex flex-row items-center justify-center text-center text-sm font-medium space-x-1 text-gray-500"},e("button",null,{class:"flex flex-row items-center text-blue-600 btn btn-ghost",disabled:m(n=>n.value.length===0,[x]),onClick$:M,type:"button"},[e("p",null,null,"Didn't recieve code?",3,null)," Resend"],3,null),3,null),e("button",null,{class:"flex flex-row items-center text-blue-600 btn btn-ghost",onClick$:j,type:"button"},"SKIP",3,null)],1,null)],1,null),[a]:{action:a}},1,"1O_5")],1,null)],1,null),1,null)},1,"1O_6")},Y=async()=>{const[l]=p();l("/login/")},q=l=>{const u=l.target.nextElementSibling,t=l.target.previousElementSibling;l.target.value.length>0&&(u?u.focus():l.target.blur()),l.target.value.length===0&&t&&t.focus()},d=Object.freeze(Object.defineProperty({__proto__:null,_hW:P,s_2N3r0qf3umU:N,s_8i4nnM4jvgU:R,s_8vlomV0MQUY:E,s_H4wBxGy5wBk:C,s_R9XnN0hiGZM:Y,s_k40xi5P0Srk:q,s_k60LC0xei3o:U,s_thRw3kmiuzI:V},Symbol.toStringTag,{value:"Module"}));export{P as _hW,N as s_2N3r0qf3umU,R as s_8i4nnM4jvgU,E as s_8vlomV0MQUY,C as s_H4wBxGy5wBk,Y as s_R9XnN0hiGZM,q as s_k40xi5P0Srk,U as s_k60LC0xei3o,V as s_thRw3kmiuzI};
