import{b as y,d as w,P as l,E as _,q as x,M as p,w as T}from"./q-cea67d7a.js";import{sendReminderEmailServer as O,useCartTableData as $}from"./q-aba2a1b4.js";import{f as R,g as j,M}from"./q-3239778f.js";import{a as Y}from"./q-97996d90.js";const B=()=>{var s,t,c,i,h,r;const[e,u]=y();u(((s=e==null?void 0:e.user)==null?void 0:s.email)??((t=e==null?void 0:e.dummyUser)==null?void 0:t.email)??"",`${((c=e==null?void 0:e.user)==null?void 0:c.firstName)??((i=e==null?void 0:e.dummyUser)==null?void 0:i.firstName)??""} ${((h=e==null?void 0:e.user)==null?void 0:h.lastName)??((r=e==null?void 0:e.dummyUser)==null?void 0:r.lastName)??""}`,(e==null?void 0:e.totalQuantity)??0,(e==null?void 0:e.products)??[],(e==null?void 0:e.userId)??"",!!(e!=null&&e.dummyUser))},z=()=>{const[e,u]=y();u.value=!1,e.value={}},J=()=>{const[e]=y(),u=new URL(window.location.href);u.searchParams.set("page",(parseInt(e)-1).toString()),location.href=u.toString()},q=()=>{const[e,u,s]=y();s.value=!0,u.value=e},Q=()=>{const[e]=y(),u=new URL(window.location.href);u.searchParams.set("page",(parseInt(e)+1).toString()),location.href=u.toString()},X=async(e,u,s,t,c,i)=>{const[h]=y(),r={email:e,name:u,totalQuantity:s,products:t,_id:c,isDummy:i};e?(h.value=!0,await O(r),h.value=!1,alert("Email sent successfully")):alert("Email is not available")},G=()=>{var S,A,P,U,C,k,F;const e=Y(),u=$();let s;(S=u.value)!=null&&S.res&&(s=JSON.parse(((A=u.value)==null?void 0:A.res)??"[]"));const t=e.url.searchParams.get("page")??"1",c=(s==null?void 0:s.total)??0,i=Math.ceil(c/20),h=e.url.searchParams.get("search")??"",r=w(!1),g=w({}),I=w(!1),L=x(()=>Promise.resolve().then(()=>v),"s_TyXLkv3AwbY",[I]);return l("div",null,{class:"flex flex-col w-full h-full bg-[#F9FAFB]"},[l("div",null,{class:"flex flex-row gap-5 items-center"},[l("h1",null,{class:"text-2xl font-bold p-2"},"Orders",3,null),l("input",{value:h},{class:"input input-bordered w-[20rem] m-2",placeholder:"Search For Orders",type:"text"},null,3,null)],1,null),l("div",null,{class:"overflow-x-auto h-[80vh] bg-[#FFF]"},l("table",null,{class:"table table-pin-rows table-sm h-full"},[l("thead",null,null,[l("tr",null,null,[" ",l("th",null,null,l("label",null,null,l("input",null,{class:"checkbox",type:"checkbox"},null,3,null),3,null),3,null),l("th",null,{align:"right",colSpan:7},l("button",null,{class:"flex flex-row gap-2 items-center btn btn-ghost"},_(R,null,3,"iS_0"),1,null),1,null)],1,null),l("tr",null,{class:"bg-[#F1F5F9]"},[l("th",null,null,null,3,null),l("th",null,null,"User",3,null),l("th",null,null,"Email",3,null),l("th",null,null,"Total Quantity",3,null),l("th",null,null,"Created At",3,null),l("th",null,null,"Last Updated At",3,null),l("th",null,null,null,3,null)],3,null)],1,null),l("tbody",null,null,[((P=s==null?void 0:s.result)==null?void 0:P.length)>0&&((U=s==null?void 0:s.result)==null?void 0:U.map((n,o)=>{var d,b,f,N,D,E;const m=new Date(n.createdAt),a=new Date(n.updatedAt);return l("tr",null,null,[l("th",null,null,l("label",null,null,l("input",null,{class:"checkbox",type:"checkbox"},null,3,null),3,null),3,null),l("td",null,null,[((d=n==null?void 0:n.user)==null?void 0:d.firstName)||(((b=n==null?void 0:n.dummyUser)==null?void 0:b.firstName)??"Unkown")," ",((f=n==null?void 0:n.user)==null?void 0:f.lastName)||(((N=n==null?void 0:n.dummyUser)==null?void 0:N.lastName)??"")],1,null),l("td",null,null,((D=n==null?void 0:n.user)==null?void 0:D.email)||(((E=n==null?void 0:n.dummyUser)==null?void 0:E.email)??"Unkown"),1,null),l("td",null,null,n==null?void 0:n.totalQuantity,1,null),l("td",null,null,m.toLocaleString("en-CA",{timeZone:"America/Toronto"}),1,null),l("td",null,null,a.toLocaleString("en-CA",{timeZone:"America/Toronto"}),1,null),l("td",null,null,[l("button",{onClick$:x(()=>Promise.resolve().then(()=>v),"s_33c002XlvYs",[n,g,r])},{class:"btn btn-ghost btn-xs"},_(j,null,3,"iS_1"),0,null),l("div",null,{class:"dropdown dropdown-end"},[l("label",null,{class:"btn m-1 btn-ghost btn-xs",tabIndex:0},_(M,null,3,"iS_2"),1,null),l("ul",null,{class:"dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52",tabIndex:0},[l("li",null,null,l("button",{onClick$:x(()=>Promise.resolve().then(()=>v),"s_7xpkUEla5gk",[n,L])},null,"Sent Reminder Email",2,null),1,null),l("li",null,null,l("button",null,null,"Sent Reminder Text",3,null),3,null)],1,null)],1,null)],1,null)],1,o)})),((C=s==null?void 0:s.result)==null?void 0:C.length)===0&&l("tr",null,null,l("td",null,{class:"text-center",colSpan:8},"No orders found",3,null),3,"iS_3")],1,null)],1,null),1,null),l("div",null,{class:"bg-[#fff]"},l("div",null,{class:"flex flex-row justify-between gap-2 p-2"},[l("button",{class:`btn btn-ghost btn-sm ${t==="1"?"text-[#D1D5DB]":"text-[#7C3AED]"} text-xs`,disabled:t==="1",onClick$:x(()=>Promise.resolve().then(()=>v),"s_0sBJAA5ReFY",[t])},null,"Previous",2,null),l("p",null,{class:"text-xs"},[t," of ",i],1,null),l("button",{class:`btn btn-ghost btn-sm text-xs ${t===i.toString()?"text-[#D1D5DB]":"text-[#7C3AED]"}`,disabled:t===i.toString(),onClick$:x(()=>Promise.resolve().then(()=>v),"s_GAzvoPTnMJY",[t])},null,"Next",2,null),r.value&&l("div",null,{class:"fixed inset-0 z-[100] bg-[#00000080] flex justify-center items-center"},l("div",null,{class:"bg-[#fff] w-[80%] h-[80%] rounded-md"},[l("div",null,{class:"flex flex-row justify-between items-center p-2"},[l("h1",null,{class:"text-xl font-bold"},"Cart Details",3,null),l("button",null,{class:"btn btn-ghost btn-xs",onClick$:x(()=>Promise.resolve().then(()=>v),"s_h0yUNEr3VBA",[g,r])},"Close",3,null)],3,null),l("div",null,{class:"flex flex-row justify-between items-center p-2"},l("p",null,{class:"text-xs"},["Cart Date: ",p(n=>{var o;return(o=n.value)==null?void 0:o.createdAt},[g])],3,null),3,null),l("div",null,{class:"flex flex-row justify-between items-center p-2"},l("p",null,{class:"text-xs"},["User Info:"," ",p(n=>{var o,m,a,d,b,f;return((a=(m=(o=n.value.user)==null?void 0:o.generalInfo)==null?void 0:m.address)==null?void 0:a.country)??((f=(b=(d=n.value.dummyUser)==null?void 0:d.generalInfo)==null?void 0:b.address)==null?void 0:f.country)},[g])," ",p(n=>{var o,m,a,d,b,f;return((a=(m=(o=n.value.user)==null?void 0:o.generalInfo)==null?void 0:m.address)==null?void 0:a.city)??((f=(b=(d=n.value.dummyUser)==null?void 0:d.generalInfo)==null?void 0:b.address)==null?void 0:f.city)},[g])],3,null),3,null),l("div",null,{class:"overflow-x-auto h-[80%]"},l("table",null,{class:"table table-pin-rows table-sm h-full"},[l("thead",null,null,l("tr",null,{class:"bg-[#F1F5F9]"},[l("th",null,null,"Image",3,null),l("th",null,null,"Product",3,null),l("th",null,null,"Price",3,null),l("th",null,null,"Quantity",3,null),l("th",null,null,"Sub Total",3,null)],3,null),3,null),l("tbody",null,null,(F=(k=g.value)==null?void 0:k.products)==null?void 0:F.map((n,o)=>{const a=(parseFloat(n==null?void 0:n.price)*(n==null?void 0:n.quantity)).toLocaleString("en-US",{style:"currency",currency:"CAD"});return l("tr",null,null,[l("td",null,null,l("img",{src:n==null?void 0:n.product_img},{alt:"",class:"w-24 h-24"},null,3,null),1,null),l("td",null,null,n==null?void 0:n.product_name,1,null),l("td",null,null,n==null?void 0:n.price,1,null),l("td",null,null,n==null?void 0:n.quantity,1,null),l("td",null,null,a,1,null)],1,o)}),1,null)],1,null),1,null)],1,null),1,"iS_4")],1,null),1,null)],1,"iS_5")},v=Object.freeze(Object.defineProperty({__proto__:null,_hW:T,s_0sBJAA5ReFY:J,s_33c002XlvYs:q,s_7xpkUEla5gk:B,s_GAzvoPTnMJY:Q,s_TyXLkv3AwbY:X,s_h0yUNEr3VBA:z,s_yfLlv0GZj98:G},Symbol.toStringTag,{value:"Module"}));export{T as _hW,J as s_0sBJAA5ReFY,q as s_33c002XlvYs,B as s_7xpkUEla5gk,Q as s_GAzvoPTnMJY,X as s_TyXLkv3AwbY,z as s_h0yUNEr3VBA,G as s_yfLlv0GZj98};
