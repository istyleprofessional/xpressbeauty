import{b as h,n as A,q as u,x as W,a as N,d as P,l as K,e as O,T as Y,s as X,E as S,_ as k,P as c,K as v,M as j,L as ee,A as ae,w as te}from"./q-cea67d7a.js";import{a as H}from"./q-46496603.js";import{getAllRelatedProductsServer as ie,useServerData as Z}from"./q-ff4af3b2.js";import{C as ne}from"./q-85815eba.js";import{C as se}from"./q-56a62043.js";import{T as re}from"./q-a7e999e2.js";import{U as oe}from"./q-d713e633.js";import{W as le}from"./q-a4c7b99d.js";import{l as G}from"./q-ff582f48.js";import"./q-97996d90.js";const ce=()=>{var _,l,p,b,T,f,w;const[e,a]=h(),n=document.createElement("script");n.type="application/ld+json";const s={"@context":"https://schema.org/","@type":"Product",name:e.product_name,image:(e.imgs??[])[0].includes("http")?(e.imgs??[])[0]:`https://xpressbeauty.ca${(e.imgs??[])[0].replace(".","")}`,description:(p=(l=(_=e.description)==null?void 0:_.replace(/<img .*?>/g,""))==null?void 0:l.replace(/Cosmo Prof/g,"Xpress Beauty"))==null?void 0:p.replace(/Canrad/g,"Xpress Beauty"),sku:e._id,brand:{"@type":"Brand",name:((b=e.companyName)==null?void 0:b.name)??""},offers:{"@type":"Offer",priceCurrency:"CAD",price:e.priceType==="range"?e.price.min:e.price.regular,priceValidUntil:"2022-11-05",itemCondition:"https://schema.org/NewCondition",availability:(((T=e.variations)==null?void 0:T.length)??0)>0?(f=e.variations)!=null&&f.some(m=>m.quantity_on_hand>0)?"https://schema.org/InStock":"https://schema.org/OutOfStock":((e==null?void 0:e.quantity_on_hand)??0)>0?"https://schema.org/InStock":"https://schema.org/OutOfStock"}},t=[];let r=0;for(const m of((w=a.result)==null?void 0:w.ratings)||[])t.push(m.rating);const i=t.reduce((m,x)=>m+x,0);r=Math.round(i/t.length*2)/2,r>0&&(s.aggregateRating={"@type":"AggregateRating",ratingValue:r,reviewCount:t.length}),n.text=JSON.stringify(s),document.head.appendChild(n)},ue=()=>{const[e,a]=h();if(a.variation_type&&a.variation_type==="Size"){const n=((a==null?void 0:a.variations)??[])[0];e.value[0]={variation_id:n._id,variation_name:n.variation_name,price:n.price,quantity:1,variation_image:n.variation_image}}},de=()=>{const[e,a]=h();e==="1"&&(a.priceType==="range"?(a.price.min=a.price.min*.9,a.price.max=a.price.max*.9):a.price.regular=a.price.regular*.9)},pe=()=>{const[e]=h();return e.value=!1},ge=()=>{const[e,a]=h();a.value="",e.value=!1},me=()=>{var _,l;const[e,a,n,s,t]=h();console.log(t),a.value={},a.value[n]={variation_id:t._id,variation_name:t.variation_name,variation_image:t.variation_image,price:t.price,quantity:1,totalQuantity:t.quantity_on_hand},e.value={...s,quantity_on_hand:t.quantity_on_hand};const r=`${(_=t.variation_image)!=null&&_.includes("+")?t.variation_image.replace("+","%2B"):t.variation_image??((s==null?void 0:s.imgs)??[])[0]}`;console.log(r);const i=document==null?void 0:document.getElementById("product-image");i&&(i==null||i.setAttribute("src",`${(l=t.variation_image)!=null&&l.includes("+")?t.variation_image.replace("+","%2B"):t.variation_image??((s==null?void 0:s.imgs)??[])[0]}`))},_e=async()=>{const[e,a,n,s,t,r,i]=h();if(!r.email){a.value=!0;return}e.value=!0;const p=await(await H("/api/fav",JSON.stringify({product:t}))).json();if(p.status==="failed"){e.value=!1,n.value=!0,s.value=p.data;return}i.wishList.data=p.data.products,e.value=!1},ve=()=>{const[e]=h();localStorage.setItem("prev",`/products/${e.perfix}`)},fe=()=>{const[e,a]=h();a[e]=0},ye=async()=>{const[e,a]=h(),n={category:e.categories,name:e.product_name},s=await ie(n);a.value=JSON.parse(s)},he=async e=>{var m,x,q;const[a,n,s,t,r,i,_]=h();t.value=!0;const l=[];let p=0;if(Object.values(s.value).length>0)Object.values(s.value).forEach(d=>{let C="";if(r.variation_type==="Size"){const L=d.variation_image;L?C=L:C=(r.imgs??[])[0]??""}else C=(r.imgs??[])[0]??"";d.price=n==="2"?d.price:d.price*.9;const V={id:`${r._id}.${d.variation_id??d.variation_name.replace(/[^A-Za-z0-9]+/g,"")}`,product_name:r.product_name,variation_name:d.variation_name,product_img:C.includes("http")?C:C.replace(".","")??"/placeholder.webp",price:parseFloat(d==null?void 0:d.price),quantity:d.quantity,currency:n==="1"?"USD":"CAD"};p+=d.quantity,l.push(V)});else{const d={id:r._id,product_name:r.product_name,product_img:((r==null?void 0:r.imgs)??[])[0]??"",price:parseFloat((x=(m=r==null?void 0:r.price)==null?void 0:m.regular)==null?void 0:x.toString()).toFixed(2),quantity:e,currency:n==="1"?"USD":"CAD"};p+=e,l.push(d)}const b={products:l,totalQuantity:p,currency:n==="1"?"USD":"CAD",isSaverClub:!(i.isEmailVerified&&i.isPhoneVerified),user:_},f=await(await H("/api/cart",JSON.stringify(b))).json(),w=(q=f==null?void 0:f.products)==null?void 0:q.reduce((d,C)=>d+C.price*C.quantity,0);a.cart={...a.cart,products:f.products,totalQuantity:f.totalQuantity,totalPrice:w,currency:n==="1"?"USD":"CAD"},setTimeout(()=>{t.value=!1},1e3)},xe=A(u(()=>import("./q-806265bf.js"),"s_pJl2i0Lbf5U")),Ce=A(u(()=>import("./q-8e045735.js"),"s_6tgoIsyr1Ag")),be=A(u(()=>import("./q-0017f9a4.js"),"s_msFHOopuU2c")),Se=A(u(()=>import("./q-3b8c44a5.js"),"s_BBLd5ObmrNE")),Te=A(u(()=>import("./q-4f4003dd.js"),"s_C52pcVUO2iU")),we=A(u(()=>import("./q-fd14ccbe.js"),"s_szv41zf6Ios")),Pe=()=>{var V,L,z,B,D,E,M,U,J,F,$,Q;W();const e=(V=JSON.parse(Z().value))==null?void 0:V._doc,a=(L=JSON.parse(Z().value))==null?void 0:L.ratings,n=N(ne),s=P([]),t=P(!1),r=K({},{deep:!0}),i=P({}),_=N(oe),l=_??{},p=N(le),b=P(!1),T=P(!1),f=P(""),w=N(se),m=w==null?void 0:w.cur,x=P({});O(u(()=>Promise.resolve().then(()=>y),"s_ji8AdeSAgIU",[e])),Y(u(()=>Promise.resolve().then(()=>y),"s_4i0tojGRfDk",[m,e]));const q=u(()=>Promise.resolve().then(()=>y),"s_nlP0iWk0rbI",[n,m,i,t,e,l,_]);O(u(()=>Promise.resolve().then(()=>y),"s_cY90Y0lLfKI",[e,s]));const d=u(()=>Promise.resolve().then(()=>y),"s_qgmLKh8iinI",[t,b,T,f,e,l,p]),C=u(()=>Promise.resolve().then(()=>y),"s_28uJ6pqLLko",[T,f]);return X("DOMContentLoaded",u(()=>Promise.resolve().then(()=>y),"s_9GlINdNXzBE",[e,a])),O(u(()=>Promise.resolve().then(()=>y),"s_tIJ70DVux8w",[m,e])),Y(u(()=>Promise.resolve().then(()=>y),"s_jsHatP8i9xo",[i,e])),O(u(()=>Promise.resolve().then(()=>y),"s_Kn9TQVdf78Y",[x,e])),S(k,{children:[t.value&&S(k,{children:c("div",null,{class:"w-full backdrop-blur-lg drop-shadow-lg fixed z-20 m-auto inset-x-0 inset-y-0 "},c("progress",null,{class:"progress progress-white w-56 fixed z-20 m-auto inset-x-0 inset-y-0  bg-white"},null,3,null),3,null)},3,"55_0"),T.value&&S(re,{handleClose:C,status:"e",get message(){return f.value},index:1,[v]:{handleClose:v,index:v,message:j(o=>o.value,[f]),status:v}},3,"55_1"),b.value&&c("div",null,{class:"w-full h-full fixed top-0 left-0 backdrop-blur-md z-50 "},c("div",null,{class:"card shadow-2xl p-5 w-fit h-fit fixed top-1/2 left-1/2 bg-white -translate-y-1/2 -translate-x-1/2 z-50"},c("div",null,{class:"card-body"},[c("h2",null,{class:"card-title"},"Please Login or Signup to add this product to your wishlist",3,null),c("div",null,{class:"card-actions justify-end"},[c("a",null,{class:"btn btn-primary",href:"/login"},"Login",3,null),c("button",null,{class:"btn btn-ghost",onClick$:u(()=>Promise.resolve().then(()=>y),"s_oli04M4LrEc",[b])},"Cancel",3,null)],3,null)],3,null),3,null),3,"55_2"),c("div",null,{class:"flex flex-col gap-5 lg:gap-20"},[c("div",null,{class:"flex flex-col justify-start items-start w-full gap-5 lg:grid lg:grid-cols-3 lg:gap-10 p-3 lg:p-10"},[S(xe,{imgs:e.imgs??[],product_name:e.product_name??""},3,"55_3"),c("div",null,{class:" col-span-2 flex flex-col gap-5"},[S(be,{categories:(e==null?void 0:e.categories)??[],companyName:(e==null?void 0:e.companyName)??"",currencyObject:m,isVariant:!0,isVerified:l.isEmailVerified&&l.isPhoneVerified,price:(e==null?void 0:e.price)??"",priceType:(e==null?void 0:e.priceType)??"",product_name:e.product_name??"",ratings:((z=a.result)==null?void 0:z.ratings)??[],sale_price:(e==null?void 0:e.sale_price)??"",[v]:{isVariant:v}},3,"55_4"),(((B=e==null?void 0:e.variations)==null?void 0:B.length)??0)>0&&((D=e==null?void 0:e.variation_type)==null?void 0:D.toLocaleLowerCase())==="size"&&c("div",null,{class:"flex flex-row gap-3 w-full md:w-96 flex-wrap md:flex-nowrap"},(E=e==null?void 0:e.variations)==null?void 0:E.sort((o,g)=>o.variation_name-g.variation_name).map((o,g)=>c("div",null,{class:"flex flex-row md:flex-col justify-start items-center w-full gap-2"},[c("button",{class:`btn w-40 ${i.value[g]?" btn-success":"btn-outline"}`,onClick$:u(()=>Promise.resolve().then(()=>y),"s_qzjnZs6tNnI",[x,i,g,e,o])},null,ee(o,"variation_name"),0,null),c("p",null,{class:"text-black text-sm font-bold"},m==="1"?(parseFloat(o.price)*.9).toLocaleString("en-us",{style:"currency",currency:"USD"}):parseFloat(o.price).toLocaleString("en-us",{style:"currency",currency:"CAD"}),1,null)],1,g)),1,"55_5"),S(Ce,{handleAddToCart:q,handleAddToFav:d,get finalVariationToAdd(){return i.value},get qunatity(){var o,g,I;return x.value.variations&&((o=x.value.variations)==null?void 0:o.length)>0&&x.value.variation_type!=="Size"?300:parseInt(((I=(g=x.value)==null?void 0:g.quantity_on_hand)==null?void 0:I.toString())??"0")},isVariation:(e.variations&&((M=e.variations)==null?void 0:M.length)>0&&e.variation_type==="Color")??!1,get variationType(){return e.variation_type},variationValue:r,[v]:{finalVariationToAdd:j(o=>o.value,[i]),handleAddToCart:v,handleAddToFav:v,qunatity:j(o=>{var g,I,R;return o.value.variations&&((g=o.value.variations)==null?void 0:g.length)>0&&o.value.variation_type!=="Size"?300:parseInt(((R=(I=o.value)==null?void 0:I.quantity_on_hand)==null?void 0:R.toString())??"0")},[x]),variationType:ae(e,"variation_type"),variationValue:v}},3,"55_6"),((U=e.variation_type)==null?void 0:U.toLocaleLowerCase())!=="size"&&(((J=e==null?void 0:e.variations)==null?void 0:J.length)??0)>0&&c("div",null,{class:`menu menu-horizontal bg-base-100 shadow-xl h-fit max-h-96 overflow-scroll gap-10 justify-center
                  items-center md:p-4 w-full lg:w-[30vw]`},(F=e==null?void 0:e.variations)==null?void 0:F.map((o,g)=>(W(),O(u(()=>Promise.resolve().then(()=>y),"s_xiVeMfMSTpA",[g,r])),(o==null?void 0:o.price)==="$null"?S(k,null,3,g):c("div",null,{class:"flex flex-col w-full justify-center"},S(we,{finalVariationToAdd:i,index:g,productId:e.id??"",product_name:e.product_name??"",value:r,variation:o,variationQuantity:(o==null?void 0:o.quantity_on_hand)??0,[v]:{finalVariationToAdd:v,value:v}},3,"55_7"),1,g))),1,"55_8")],1,null)],1,null),c("div",null,{class:"flex flex-row gap-5 lg:gap-10 p-3 lg:p-10"},S(Se,{directions:e.directions??"",ingredients:e.ingredients??"",productId:e._id??"",product_description:e.description??"",ratingsProp:(($=a.result)==null?void 0:$.ratings)??[],user:l.email?l:null},3,"55_9"),1,null),((Q=s.value)==null?void 0:Q.length)>0&&S(Te,{get relatedProducts(){return s.value||null},currencyObject:m,[v]:{relatedProducts:j(o=>o.value||null,[s])}},3,"55_10")],1,null)]},1,"55_11")},Ae=()=>{var n,s,t,r;const[e,a]=h();if(a.variation_type==="Size"&&((a==null?void 0:a.variations)??[]).length>0){const i=document==null?void 0:document.getElementById("product-image");i==null||i.setAttribute("src",`${(s=(n=((a==null?void 0:a.variations)??[])[0])==null?void 0:n.variation_image)!=null&&s.includes("+")?(t=((a==null?void 0:a.variations)??[])[0])==null?void 0:t.variation_image.replace("+","%2B"):((r=((a==null?void 0:a.variations)??[])[0])==null?void 0:r.variation_image)??((a==null?void 0:a.imgs)??[])[0]}`),e.value={...a,quantity_on_hand:((a==null?void 0:a.variations)??[])[0].quantity_on_hand}}else{const i=document==null?void 0:document.getElementById("product-image");i==null||i.setAttribute("src",`${((a==null?void 0:a.imgs)??[])[0].includes("http")?((a==null?void 0:a.imgs)??[])[0]:((a==null?void 0:a.imgs)??[])[0].replace(".","")}`),e.value=a}},Le=async()=>{var i,_;const[e,a]=h();if(a.priceType==="range"){const l=await G("pk_test_51JQBoNENS3vWhi4PIxo7LXkFSn5B92YBONVII3ZNsq2s2lFuBxQ2RZYIIxLHNht8MCd748WSpm0IeL3CeJip9uqx00AlZNkc6H"),p=l==null?void 0:l.elements({locale:"en-GB"}),b={amount:(((i=a.price)==null?void 0:i.min)??0)*100,currency:e==="1"?"USD":"CAD",logoType:"badge",lockupTheme:"black",modalLinkStyle:"learn-more-text",modalTheme:"mint",introText:"Pay"};(p==null?void 0:p.create("afterpayClearpayMessage",b)).mount("#afterpay-clearpay-message");return}const n=await G("pk_test_51JQBoNENS3vWhi4PIxo7LXkFSn5B92YBONVII3ZNsq2s2lFuBxQ2RZYIIxLHNht8MCd748WSpm0IeL3CeJip9uqx00AlZNkc6H"),s=n==null?void 0:n.elements({locale:"en-GB"}),t={amount:(((_=a.price)==null?void 0:_.regular)??0)*100,currency:e==="1"?"USD":"CAD",logoType:"badge",lockupTheme:"black",modalLinkStyle:"learn-more-text",modalTheme:"mint",introText:"Pay"};(s==null?void 0:s.create("afterpayClearpayMessage",t)).mount("#afterpay-clearpay-message")},y=Object.freeze(Object.defineProperty({__proto__:null,_hW:te,s_28uJ6pqLLko:ge,s_4i0tojGRfDk:de,s_9GlINdNXzBE:ce,s_Kn9TQVdf78Y:Ae,s_cY90Y0lLfKI:ye,s_ji8AdeSAgIU:ve,s_jsHatP8i9xo:ue,s_nlP0iWk0rbI:he,s_oli04M4LrEc:pe,s_qgmLKh8iinI:_e,s_qzjnZs6tNnI:me,s_tIJ70DVux8w:Le,s_xiVeMfMSTpA:fe,s_zOFNlTzG5bk:Pe},Symbol.toStringTag,{value:"Module"}));export{te as _hW,ge as s_28uJ6pqLLko,de as s_4i0tojGRfDk,ce as s_9GlINdNXzBE,Ae as s_Kn9TQVdf78Y,ye as s_cY90Y0lLfKI,ve as s_ji8AdeSAgIU,ue as s_jsHatP8i9xo,he as s_nlP0iWk0rbI,pe as s_oli04M4LrEc,_e as s_qgmLKh8iinI,me as s_qzjnZs6tNnI,Le as s_tIJ70DVux8w,fe as s_xiVeMfMSTpA,Pe as s_zOFNlTzG5bk};
