import{b as f,x as j,d,e as b,E as v,P as l,K as r,M as x,q as i,_ as M,w as A}from"./q-cea67d7a.js";import{K as T}from"./q-97996d90.js";import{T as y}from"./q-a7e999e2.js";import{useVerifyToken as C,useFormAction as P}from"./q-b56f01a8.js";import{g as S}from"./q-46496603.js";const L=async()=>{var o,s;const[e,t]=f(),n=4;t.value=new Array(((o=e==null?void 0:e.user)==null?void 0:o.phoneNumber.length)-n+1).join("x")+((s=e==null?void 0:e.user)==null?void 0:s.phoneNumber.slice(-n))},I=e=>{const t=e.target.nextElementSibling,n=e.target.previousElementSibling;e.target.value.length>0&&(t?t.focus():e.target.blur()),e.target.value.length===0&&n&&n.focus()},$=()=>{j();const e=d(!1),t=d(""),n=d(""),o=C(),s=JSON.parse(o.value??"{}"),c=d(""),h=d(),p=P(),a=d("");b(i(()=>Promise.resolve().then(()=>g),"s_Cf0tb1jDrAw",[s,c]));const w=i(()=>Promise.resolve().then(()=>g),"s_V7OoEG9aSro",[t,n]),m=i(()=>Promise.resolve().then(()=>g),"s_g20gd0TYomM"),_=i(()=>Promise.resolve().then(()=>g),"s_xqTEjothT5k",[t,s,a,n]);b(i(()=>Promise.resolve().then(()=>g),"s_egYCXeXlFvw",[t,n])),b(i(()=>Promise.resolve().then(()=>g),"s_dqzvx223kKA",[p,t,e,a]),{strategy:"document-idle"});const k=i(()=>Promise.resolve().then(()=>g),"s_NhN7cok4NN0");return v(M,{children:l("div",null,{class:"relative flex min-h-screen flex-col justify-center overflow-hidden bg-gray-50 py-12"},l("div",null,{class:"relative bg-white px-6 pt-10 pb-9 shadow-xl mx-auto w-full max-w-lg rounded-2xl"},[t.value&&l("div",null,{class:"w-full mb-10"},v(y,{handleClose:w,status:"e",get message(){return t.value},index:1,[r]:{handleClose:r,index:r,message:x(u=>u.value,[t]),status:r}},3,"1l_0"),1,"1l_1"),n.value&&l("div",null,{class:"w-full mb-10"},v(y,{handleClose:w,status:"s",get message(){return n.value},index:1,[r]:{handleClose:r,index:r,message:x(u=>u.value,[n]),status:r}},3,"1l_2"),1,"1l_3"),l("div",null,{class:"mx-auto flex w-full max-w-md flex-col space-y-16"},[l("div",null,{class:"flex flex-col items-center justify-center text-center space-y-2"},[l("div",null,{class:"font-semibold text-3xl"},l("p",null,null,"Phone Verification",3,null),3,null),l("div",null,{class:"flex flex-row text-sm font-medium text-gray-400"},l("p",null,null,["We have sent a code to your phone ",x(u=>u.value,[c])],3,null),3,null)],3,null),l("script",null,{src:"https://www.google.com/recaptcha/api.js?render=6Lc3M80jAAAAAJcoRLiwoul9szk5DYiYx9VIR2HE"},null,3,null),v(T,{action:p,children:l("div",null,{class:"flex flex-col space-y-16"},[l("div",{ref:h},{class:"flex flex-row items-center justify-between mx-auto gap-3 w-full max-w-xs",id:"inputs"},[l("input",null,{class:"w-full h-16 flex flex-col items-center justify-center text-center px-5   outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700",inputMode:"numeric",maxLength:1,name:"otp.0",onInput$:m,type:"text"},null,3,null),l("input",null,{class:"w-full h-16 flex flex-col items-center justify-center text-center px-5    outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700",inputMode:"numeric",maxLength:1,name:"otp.1",onInput$:m,type:"text"},null,3,null),l("input",null,{class:"w-full h-16 flex flex-col items-center justify-center text-center px-5   outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700",inputMode:"numeric",maxLength:1,name:"otp.2",onInput$:m,type:"text"},null,3,null),l("input",null,{class:"w-full h-16 flex flex-col items-center justify-center text-center px-5    outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700",inputMode:"numeric",maxLength:1,name:"otp.3",onInput$:m,type:"text"},null,3,null),l("input",null,{class:"w-full h-16 flex flex-col items-center justify-center text-center px-5    outline-none rounded-xl border border-gray-200 text-lg bg-white focus:bg-gray-50 focus:ring-1 ring-blue-700",inputMode:"numeric",maxLength:1,name:"otp.4",onInput$:m,type:"text"},null,3,null),l("input",null,{id:"recaptcha",name:"recaptcha",type:"hidden",value:x(u=>u.value,[a])},null,3,null)],3,null),l("div",null,{class:"flex flex-col space-y-5"},[l("div",null,null,l("button",null,{class:"btn text-center w-full border   rounded-xl outline-none btn-primary border-none text-white shadow-sm",disabled:x(u=>u.value.length===0,[a]),onClick$:i(()=>Promise.resolve().then(()=>g),"s_Y0jcWkV1Srk",[e]),type:"submit"},[e.value&&l("span",null,{class:"loading-spinner loading-spinner-white"},null,3,"1l_4"),"Verify Account"],1,null),1,null),l("div",null,{class:"flex flex-row items-center justify-center text-center text-sm font-medium space-x-1 text-gray-500"},l("button",null,{class:"flex flex-row items-center  btn btn-ghost text-black",disabled:x(u=>u.value.length===0,[a]),onClick$:_,type:"button"},[l("p",null,null,"Didn't recieve code?",3,null)," Resend"],3,null),3,null),l("button",null,{class:"flex flex-row items-center btn btn-ghost text-black",onClick$:k,type:"button"},"SKIP",3,null)],1,null)],1,null),reloadDocument:!1,[r]:{action:r,reloadDocument:r}},1,"1l_5")],1,null)],1,null),1,null)},1,"1l_6")},N=async()=>{const[e,t,n,o]=f(),s=await S(`/api/phoneOtp/resend?token=${t.token}&recaptcha=${n.value}`),c=await(s==null?void 0:s.json());c.status==="success"&&(o.value="OTP sent successfully"),c.status==="failed"&&(e.value=c.message??"Something went wrong")},E=({track:e})=>{var c,h,p;const[t,n,o,s]=f();e(()=>{var a;return(a=t.value)==null?void 0:a.status}),o.value=!1,((c=t.value)==null?void 0:c.status)==="success"&&(window.location.href="/login/"),((h=t.value)==null?void 0:h.status)==="failed"&&(n.value=((p=t.value)==null?void 0:p.err)??"Something went wrong"),window.grecaptcha.ready(async()=>{const a=await window.grecaptcha.execute("6Lc3M80jAAAAAJcoRLiwoul9szk5DYiYx9VIR2HE",{action:"submit"});s.value=a})},V=()=>{const[e]=f();return e.value=!0},Y=()=>{const[e,t]=f();e.value="",t.value=""},O=()=>{window.location.href="/login/"},D=({track:e,cleanup:t})=>{const[n,o]=f();e(()=>o.value),e(()=>n.value);const s=setTimeout(()=>{n.value="",o.value=""},2e3);t(()=>{clearTimeout(s)})},g=Object.freeze(Object.defineProperty({__proto__:null,_hW:A,s_4RmjO2rppmM:$,s_Cf0tb1jDrAw:L,s_NhN7cok4NN0:O,s_V7OoEG9aSro:Y,s_Y0jcWkV1Srk:V,s_dqzvx223kKA:E,s_egYCXeXlFvw:D,s_g20gd0TYomM:I,s_xqTEjothT5k:N},Symbol.toStringTag,{value:"Module"}));export{A as _hW,$ as s_4RmjO2rppmM,L as s_Cf0tb1jDrAw,O as s_NhN7cok4NN0,Y as s_V7OoEG9aSro,V as s_Y0jcWkV1Srk,E as s_dqzvx223kKA,D as s_egYCXeXlFvw,I as s_g20gd0TYomM,N as s_xqTEjothT5k};
