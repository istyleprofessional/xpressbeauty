import{b as o,x as j,d as u,l as E,T as I,e as A,P as e,M as d,q as r,E as f,_ as x,L as C,K as w,w as M}from"./q-cea67d7a.js";import{a as F}from"./q-46496603.js";import{T as L}from"./q-a7e999e2.js";import{e as S}from"./q-97996d90.js";const V=({track:l})=>{const[s,a]=o();l(()=>s.value),s.value;for(let n=0;n<s.value.length;n++){const v=s.value[n].rating;a.value[v]+=1}},q=()=>{const[l]=o();l.value=!0},H=()=>{const[l,s]=o(),a=document.getElementById("mainDiv");a&&(a.innerHTML=l.directions.replace(/<img .*?>/g,"").replace(/Cosmo Prof/g,"Xpress Beauty").replace(/CanRad /g,"Xpress Beauty").replace(/CR.*/,"").trim(),s.value="directions")},Y=()=>{const[l,s]=o(),a=document.getElementById("mainDiv");a&&(a.innerHTML=l.product_description.replace(/<img .*?>/g,"").replace(/Cosmo Prof/g,"Xpress Beauty").replace(/CanRad /g,"Xpress Beauty").replace(/CR.*/,"").trim(),s.value="description")},Q=l=>{const[s]=o();return s.reviewTitle=l.target.value},W=l=>{const[s]=o(),a=l.target.getAttribute("id");s.ratings=parseFloat(a)},X=()=>{const[l]=o();l.value=""},K=async()=>{const[l,s,a,n]=o();n.createdAt=new Date,n.ratings===0&&(n.ratings=5),n.recaptcha=a.value,(await(await F("/api/rating",n)).json()).status!=="failed"?s.value=!1:l.value="Something went wrong please try again later",window.location.reload()},N=()=>{const[l,s]=o(),a=document.getElementById("mainDiv");a&&(a.innerHTML=l.ingredients.replace(/<img .*?>/g,"").replace(/Cosmo Prof/g,"Xpress Beauty").replace(/CanRad /g,"Xpress Beauty").replace(/CR.*/,"").trim(),s.value="ingredients")},G=({track:l})=>{const[s,a]=o();l(()=>s.value),s.value===!0&&setTimeout(()=>{window.grecaptcha.ready(async()=>{const n=await window.grecaptcha.execute("6Lc3M80jAAAAAJcoRLiwoul9szk5DYiYx9VIR2HE",{action:"submit"});a.value=n})},1e3)},O=()=>{const[l]=o();l.value=!1},z=()=>{const[l,s]=o();l.value=!1,s.value=!0},U=async()=>{const[l,s]=o();s.value=l.ratingsProp},J=()=>{const[l,s,a]=o();if(a.user)l.value=!0;else{s("/login");return}},Z=l=>{var k;j();const s=S(),a=u(!0),n=u(!1),v=u(!1),m=u(""),b=E({ratings:0,reviewTitle:"",reviewDescription:"",productId:l.productId,userId:(k=l.user)==null?void 0:k._id,recaptcha:""},{deep:!0}),p=u([]),_=u(""),g=u("description"),y=u([0,0,0,0,0,0]);I(r(()=>Promise.resolve().then(()=>i),"s_0N6xCDz6YZs",[l,p]));const D=r(()=>Promise.resolve().then(()=>i),"s_q0AHVhSFGQQ",[a]),P=r(()=>Promise.resolve().then(()=>i),"s_8mNRW3uJsoQ",[a,v]),B=r(()=>Promise.resolve().then(()=>i),"s_V7yub5UnrKo",[n,s,l]),R=r(()=>Promise.resolve().then(()=>i),"s_KZdR3QBQMRo",[b]),T=r(()=>Promise.resolve().then(()=>i),"s_LWuBvrroAiA",[m,n,_,b]);A(r(()=>Promise.resolve().then(()=>i),"s_oP3y4wIRxXw",[v,_]),{strategy:"intersection-observer"});const $=r(()=>Promise.resolve().then(()=>i),"s_R0AaLBUMjBs",[m]);return A(r(()=>Promise.resolve().then(()=>i),"s_tR1qFd7iJgI",[p,y]),{strategy:"document-ready"}),e("div",null,{class:"flex flex-col gap-8 md:pl-14 justify-center items-center md:justify-start md:items-start"},[e("div",null,{class:"bg-[#F4F4F5] w-96 md:w-[32rem] h-20 justify-center flex items-center rounded-lg"},[v.value===!0&&e("script",null,{src:"https://www.google.com/recaptcha/api.js?render=6Lc3M80jAAAAAJcoRLiwoul9szk5DYiYx9VIR2HE"},null,3,"7m_0"),e("div",null,{class:"btn-group w-96 flex justify-center items-center"},[e("button",null,{class:d(t=>`btn ${t.value?"btn-active":""} w-22 md:w-60 text-xs md:text-base`,[a]),onClick$:D},"Product Description",3,null),e("button",null,{class:d(t=>`btn ${t.value?"":"btn-active"} w-22 md:w-60 text-xs font-inter md:text-base`,[a]),onClick$:P},"Ratings and Reviews",3,null)],3,null)],1,null),e("div",null,{class:"w-full md:w-96 lg:w-[36rem]"},a.value?e("div",null,{class:"flex flex-col gap-2 w-full"},[e("div",null,{class:"tabs tabs-bordered w-full",role:"tablist"},[l.product_description&&e("button",null,{class:d(t=>`tab ${t.value==="description"?"tab-active":""}`,[g]),onClick$:r(()=>Promise.resolve().then(()=>i),"s_5T780gVyhxI",[l,g]),role:"tab"},"Description",3,"7m_1"),l.ingredients&&e("button",null,{class:d(t=>`tab ${t.value==="ingredients"?"tab-active":""}`,[g]),onClick$:r(()=>Promise.resolve().then(()=>i),"s_CMtueSrmN0I",[l,g]),role:"tab"},"Ingredients",3,"7m_2"),l.directions&&e("button",null,{class:d(t=>`tab ${t.value==="directions"?"tab-active":""}`,[g]),onClick$:r(()=>Promise.resolve().then(()=>i),"s_W4F2bTVnKxE",[l,g]),role:"tab"},"Directions",3,"7m_3")],1,null),e("div",null,{class:"text-black font-normal text-base w-full p-2",dangerouslySetInnerHTML:d(t=>t.product_description.replace(/<img .*?>/g,"").replace(/Cosmo Prof/g,"Xpress Beauty").replace(/CanRad /g,"Xpress Beauty").replace(/CR.*/,"").trim(),[l]),id:"mainDiv"},null,3,null)],1,"7m_4"):e("div",null,{class:"flex flex-col gap-10"},[e("div",null,{class:"flex flex-col gap-4"},[e("h2",null,{class:"text-black font-bold text-3xl"},"Ratings & Reviews",3,null),e("button",null,{class:"text-[#BF0A30] btn-sm btn-ghost w-52 rounded-full",onClick$:B},d(t=>t.user?"Write a review":"Login to add a review",[l]),3,null)],3,null),e("div",null,{class:"flex flex-col gap-4"},[e("h1",null,{class:"text-black text-sm"},"Summary",3,null),e("div",null,{class:"flex flex-col gap-8"},Array.from(Array(5).keys()).sort((t,c)=>c-t).map(t=>e("div",null,{class:"flex flex-row gap-2 jusify-center items-center"},[e("p",null,{class:"text-black text-xs"},t+1,1,null),e("progress",{value:y.value[t+1]*100/p.value.length},{class:"progress w-56 bg-[#E4E4E7]",max:"100"},null,3,null)],1,t)),1,null),p.value.length>0&&e("div",null,{class:"card shadow-md w-full h-fit md:p-5"},e("div",null,{class:"card-body h-96 overflow-y-auto"},p.value.sort((t,c)=>new Date(c.createdAt).getTime()-new Date(t.createdAt).getTime()).map((t,c)=>f(x,{children:[e("div",null,{class:"flex flex-row gap-3"},[e("div",null,{class:"flex flex-col gap-5 justify-center items-center"},[e("div",null,{class:"rating rating-xs md:rating-md rating-half"},Array(5).fill("").map((le,h)=>f(x,{children:[e("input",{class:`mask mask-star-2 mask-half-1 ${t.rating>h?"bg-[#FFC75B]":"bg-[#E4E4E7]"}`},{name:"rating-10",type:"radio"},null,3,null),e("input",{class:`mask mask-star-2 mask-half-2 ${t.rating>h?"bg-[#FFC75B]":"bg-[#E4E4E7]"}`},{name:"rating-10",type:"radio"},null,3,null)]},1,h)),1,null),e("p",null,{class:"text-xs md:text-base"},new Date(t.createdAt).toLocaleString("en-US",{timeZone:"America/New_York"}),1,null)],1,null),e("div",null,{class:"flex flex-col gap-3 lg:col-span-3 w-full "},[e("h3",null,{class:"text-black font-bold text-md break-words"},C(t,"reviewTitle"),1,null),e("p",null,{class:"text-black text-sm break-words"},C(t,"reviewDescription"),1,null)],1,null)],1,null),e("div",null,{class:"divider"},null,3,null)]},1,c)),1,null),1,"7m_5")],1,null),n.value&&e("div",null,{class:"w-full h-full fixed top-0 left-0 backdrop-blur-md z-50 "},e("div",null,{class:"card shadow-2xl p-5 w-fit h-fit fixed top-1/2 left-1/2 bg-white -translate-y-1/2 -translate-x-1/2 z-50"},[m.value&&e("div",null,{class:"w-full"},f(L,{handleClose:$,status:"e",get message(){return m.value},index:1,[w]:{handleClose:w,index:w,message:d(t=>t.value,[m]),status:w}},3,"7m_6"),1,"7m_7"),e("div",null,{class:"card-body"},[e("div",null,{class:"card-actions justify-end"},e("button",null,{class:"btn btn-square btn-sm",onClick$:r(()=>Promise.resolve().then(()=>i),"s_KmVp2b08I4E",[n])},e("svg",null,{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e("path",null,{d:"M6 18L18 6M6 6l12 12","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,3,null),3,null),3,null),3,null),e("div",null,{class:"flex flex-col gap-3"},[e("label",null,{class:"label"},"How would you rate this product?",3,null),e("div",null,{class:"rating rating-lg rating-half"},[e("input",null,{class:"rating-hidden",name:"rating-10",type:"radio"},null,3,null),Array(5).fill("").map((t,c)=>f(x,{children:[e("input",{id:`${c+.5}`},{class:"mask mask-star-2 mask-half-1 bg-[#FFC75B]",name:"rating-10",onChange$:R,type:"radio"},null,3,null),e("input",{id:`${c+1}`},{class:" mask mask-star-2 mask-half-2 bg-[#FFC75B]",name:"rating-10",onChange$:R,type:"radio"},null,3,null)]},1,c))],1,null)],1,null),e("div",null,{class:"flex flex-col gap-3"},[e("label",null,{class:"label"},"Review Title",3,null),e("input",null,{class:"input input-bordered",onChange$:r(()=>Promise.resolve().then(()=>i),"s_qhvUpcGGHhg",[b]),placeholder:"Review Title",type:"text"},null,3,null)],3,null),e("div",null,{class:"flex flex-col gap-3"},[e("label",null,{class:"label"},"Review Description",3,null),e("textarea",null,{class:"textarea h-32 textarea-bordered",onChange$:r(()=>Promise.resolve().then(()=>i),"s_CY1kGYbpcuw",[b]),placeholder:"Review Description"},null,3,null)],3,null),e("button",null,{class:"btn btn-primary",onClick$:T},"Submit",3,null)],1,null)],1,null),1,"7m_8")],1,null),1,null)],1,"7m_9")},ee=l=>{const[s]=o();return s.reviewDescription=l.target.value},i=Object.freeze(Object.defineProperty({__proto__:null,_hW:M,s_0N6xCDz6YZs:U,s_5T780gVyhxI:Y,s_8mNRW3uJsoQ:z,s_BBLd5ObmrNE:Z,s_CMtueSrmN0I:N,s_CY1kGYbpcuw:ee,s_KZdR3QBQMRo:W,s_KmVp2b08I4E:O,s_LWuBvrroAiA:K,s_R0AaLBUMjBs:X,s_V7yub5UnrKo:J,s_W4F2bTVnKxE:H,s_oP3y4wIRxXw:G,s_q0AHVhSFGQQ:q,s_qhvUpcGGHhg:Q,s_tR1qFd7iJgI:V},Symbol.toStringTag,{value:"Module"}));export{M as _hW,U as s_0N6xCDz6YZs,Y as s_5T780gVyhxI,z as s_8mNRW3uJsoQ,Z as s_BBLd5ObmrNE,N as s_CMtueSrmN0I,ee as s_CY1kGYbpcuw,W as s_KZdR3QBQMRo,O as s_KmVp2b08I4E,K as s_LWuBvrroAiA,X as s_R0AaLBUMjBs,J as s_V7yub5UnrKo,H as s_W4F2bTVnKxE,G as s_oP3y4wIRxXw,q as s_q0AHVhSFGQQ,Q as s_qhvUpcGGHhg,V as s_tR1qFd7iJgI};
