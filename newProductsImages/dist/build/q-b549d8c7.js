import{b as v,x as $,d as b,e as Q,P as l,E as i,q as c,_ as x,K as s,M as y,L as S,w as E}from"./q-cea67d7a.js";import{E as q}from"./q-72cd6f96.js";import{K as z}from"./q-97996d90.js";import{I as k}from"./q-086cadbe.js";import{T}from"./q-a7e999e2.js";import{useEditProductData as C,useFormAction as j}from"./q-557a9e9c.js";const F=()=>{var e;(e=document.querySelector(".alert"))==null||e.classList.add("hidden")},I=e=>{const[t]=v();return t.value=e.target.value},V=async(e,t)=>{var f;const[h,d,m]=v(),u=e.target.files[0];if(!u)return;const o=new FormData;o.append("image",u),o.append("name",`${d.value.replace(/ /g,"-").replace(/[^a-zA-Z0-9\s]/g,"")}/${u.name.split(".")[0].replace(/[^a-zA-Z0-9\s]/g,"")}.webp`),(await(await fetch("/api/admin/product/upload",{method:"POST",body:o})).json()).message===200&&(t==="main"&&(h.value=`https://xpressbeauty.s3.ca-central-1.amazonaws.com/products-images-2/${d.value.replace(/ /g,"-").replace(/[^a-zA-Z0-9\s]/g,"")}/${u.name.split(".")[0].replace(/[^a-zA-Z0-9\s]/g,"")}.webp`),t==="variant"&&((f=document.querySelector(`#variantImage-${m.value}`))==null||f.setAttribute("src",`https://xpressbeauty.s3.ca-central-1.amazonaws.com/products-images-2/${d.value.replace(/ /g,"-").replace(/[^a-zA-Z0-9\s]/g,"")}/${u.name.split(".")[0].replace(/[^a-zA-Z0-9\s]/g,"")}.webp`)))},R=e=>{const[t]=v();return t.value=e.target.value},L=e=>{const[t]=v();return t(e,"main")},N=()=>{const[e]=v();return e.value=!e.value},O=e=>{const[t]=v();return t(e,"variant")},U=()=>{var B;$();const e=C(),t=JSON.parse(e.value).categories,h=C(),d=JSON.parse(h.value).brands,m=j(),u=b(""),o=b(""),r=b(""),_=b(!1),f=b(1),w=b("");Q(c(()=>Promise.resolve().then(()=>p),"s_SMGjc0LeFPA",[o,r]));const P=c(()=>Promise.resolve().then(()=>p),"s_fM7hipk5k2A",[u,r,f]),A=c(()=>Promise.resolve().then(()=>p),"s_u9mTK0u6nRI");return l("div",null,{class:"flex h-full w-full flex-col bg-[#F9FAFB]"},[l("script",null,{referrerPolicy:"origin",src:"https://cdn.tiny.cloud/1/7d7c50ku3fuvbrrbjft38fdtt26o51zx0iwuab7hlwexhgr9/tinymce/5/tinymce.min.js"},null,3,null),m.isRunning&&i(x,{children:l("div",null,{class:"fixed inset-x-0 inset-y-0 z-20 m-auto w-full drop-shadow-lg backdrop-blur-lg backdrop-brightness-75 "},l("progress",null,{class:"progress progress-secondary fixed inset-x-0 inset-y-0 z-20 m-auto w-56 bg-black"},null,3,null),3,null)},3,"QS_0"),((B=m.value)==null?void 0:B.status)==="success"&&i(T,{handleClose:A,index:1,message:"Product Updated Successfully",status:"s",[s]:{handleClose:s,index:s,message:s,status:s}},3,"QS_1"),i(z,{action:m,children:[l("div",null,{class:"flex w-full flex-row justify-between"},[l("h1",null,{class:"p-2 text-2xl font-bold text-[#6B7280]"},"Add Product",3,null),l("div",null,{class:"flex flex-row items-center gap-2"},l("button",null,{class:"btn btn-sm w-40 bg-[#7C3AED] text-white",type:"submit"},"Save",3,null),3,null)],3,null),l("div",null,{class:"flex h-full w-full flex-col gap-10 bg-[#FFF] p-6"},[l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Product Name",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"product_name",onInput$:c(()=>Promise.resolve().then(()=>p),"s_qJtu77vuUlE",[r]),type:"text"},null,3,null)],3,null),r.value!==""&&i(x,{children:[l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Image",3,null),l("div",null,{class:"col-span-3 flex flex-col gap-2"},[i(k,{get src(){return u.value},alt:"",class:"h-24 w-24",[s]:{alt:s,class:s,src:y(n=>n.value,[u])}},3,"QS_2"),l("input",null,{class:"file-input file-input-bordered file-input-xs w-full max-w-xs",onChange$:c(()=>Promise.resolve().then(()=>p),"s_DxtDE8DlSqA",[P]),type:"file"},null,3,null),l("input",null,{name:"product_image",type:"hidden",value:y(n=>n.value,[u])},null,3,null)],1,null)],1,null),l("div",null,{class:"grid grid-cols-9"},l("div",null,{class:"col-span-9 ml-[139px]  "},i(q,{get product_name(){return r.value},[s]:{product_name:y(n=>n.value,[r])}},3,"QS_3"),1,null),1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Price Type",3,null),l("select",null,{class:"select w-full max-w-xs",name:"priceType",onChange$:c(()=>Promise.resolve().then(()=>p),"s_D3WEs0juEJ4",[w])},[l("option",null,{disabled:!0},"Pick product price type",3,null),l("option",null,{value:"single"},"Single",3,null),l("option",null,{value:"range"},"Range",3,null)],3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[w.value==="range"&&i(x,{children:[l("p",null,{class:"col-span-1"},"Price Range",3,null),l("div",null,{class:"col-span-3 flex flex-row items-center gap-2"},[l("input",null,{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"price.min",type:"text"},null,3,null),l("p",null,{class:"col-span-1"},"-",3,null),l("input",null,{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"price.max",type:"text"},null,3,null)],3,null)]},3,"QS_4"),w.value==="single"&&i(x,{children:[l("p",null,{class:"col-span-1"},"Price",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"price.regular",type:"text"},null,3,null)]},3,"QS_5")],1,null),l("div",null,{class:"grid grid-cols-4"},[w.value==="range"&&i(x,{children:[l("p",null,{class:"col-span-1"},"Sale Price Range",3,null),l("div",null,{class:"col-span-3 flex flex-row items-center gap-2"},[l("input",null,{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"sale_price.min",type:"text"},null,3,null),l("p",null,{class:"col-span-1"},"-",3,null),l("input",null,{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"sale_price.max",type:"text"},null,3,null)],3,null)]},3,"QS_6"),w.value==="single"&&i(x,{children:[l("p",null,{class:"col-span-1"},"Sale Price",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"sale_price.sale",type:"text"},null,3,null)]},3,"QS_7")],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Category",3,null),l("select",null,{class:"select w-full max-w-xs",name:"category"},[l("option",null,{disabled:!0},"Pick product main category",3,null),t.result.reduce((n,a)=>(n.some(D=>a.main===D.main)||n.push(a),n),[]).sort((n,a)=>n.main-a.main).map((n,a)=>l("option",{value:S(n,"main")},null,n.main,1,a))],1,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Sub Category",3,null),l("select",null,{class:"select w-full max-w-xs",name:"sub-category"},[l("option",null,{disabled:!0},"Pick product sub category",3,null),t.result.reduce((n,a)=>(n.some(D=>a.name===D.name)||n.push(a),n),[]).sort((n,a)=>{var g;return(g=n.name)==null?void 0:g.localeCompare(a.name)}).map((n,a)=>l("option",{value:S(n,"name")},null,n.name,1,a))],1,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Brand",3,null),l("select",null,{class:"select w-full max-w-xs",name:"companyName.name"},[l("option",null,{disabled:!0},"Pick product brand",3,null),d.result.reduce((n,a)=>(n.some(D=>a.name.toLowerCase()===D.name.toLowerCase())||n.push(a),n),[]).sort((n,a)=>{var g;return(g=n.name)==null?void 0:g.localeCompare(a.name)}).map((n,a)=>l("option",{value:S(n,"name")},null,n.name,1,a))],1,null)],1,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Description",3,null),l("textarea",null,{id:"mytextarea",value:y(n=>n.value,[o])},null,3,null),l("input",null,{name:"description",type:"hidden",value:y(n=>n.value,[o])},null,3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Item No.",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"item_no",type:"text"},null,3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"SKU",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"sku",type:"text"},null,3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Quantity on hand",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"quantity_on_hand",type:"text"},null,3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Barcode value",3,null),l("input",null,{class:"input input-md col-span-3 w-full border-[1px] border-[#D1D5DB]",name:"bar_code_value",type:"text"},null,3,null)],3,null),l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Update Using QuickBooks",3,null),l("input",null,{class:"form-checkbox h-5 w-5 text-[#7C3AED]",name:"updateQuickBooks",type:"checkbox"},null,3,null)],3,null),l("button",null,{class:"btn btn-primary w-96",onClick$:c(()=>Promise.resolve().then(()=>p),"s_AbanyQAPsK8",[_]),type:"button"},"Add Variation",3,null),_.value&&l("div",null,{class:"grid grid-cols-4"},[l("p",null,{class:"col-span-1"},"Add Variation",3,null),l("div",null,{class:"variantArray flex flex-col gap-2 p-2"},[l("p",null,null,"Variation Name",3,null),l("input",null,{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"variations.1.variation_name",type:"text"},null,3,null),l("p",null,null,"Variation Image",3,null),i(k,{alt:"",class:"h-24 w-24",src:"",get id(){return`variantImage-${f.value}`},[s]:{alt:s,class:s,id:y(n=>`variantImage-${n.value}`,[f]),src:s}},3,"QS_8"),l("input",null,{class:"file w-full",onChange$:c(()=>Promise.resolve().then(()=>p),"s_i8TuoTRDL8U",[P]),type:"file"},null,3,null),l("input",null,{name:"variations.1.variation_image",type:"hidden"},null,3,null),l("p",null,null,"Variation price",3,null),l("input",null,{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"variations.1.price",type:"text"},null,3,null),l("p",null,null,"Variation quantity",3,null),l("input",null,{class:"input input-md w-full border-[1px] border-[#D1D5DB]",name:"variations.1.quantity_on_hand",type:"text"},null,3,null),l("hr",null,{class:"mt-5 border-[#D1D5DB] pb-5"},null,3,null)],1,null),l("div",null,{class:"flex flex-row items-center justify-end p-2"},l("button",null,{class:"btn btn-primary",onClick$:c(()=>Promise.resolve().then(()=>p),"s_67u23Tgdzfw",[f]),type:"button"},"Add",3,null),3,null)],1,"QS_9")]},1,"QS_10")],1,null)],[s]:{action:s}},1,"QS_11"),l("div",null,{class:"bg-[#fff]"},l("div",null,{class:"flex flex-row justify-between gap-2 p-2"},l("dialog",null,{class:"modal",id:"my_modal_1"},l("div",null,{class:"modal-box"},[l("h3",null,{class:"text-lg font-bold"},"Change Product Visibility!",3,null),l("p",null,{class:"py-4"},"Are you sure you want change ",3,null),l("div",null,{class:"modal-action"},l("form",null,{class:"flex gap-2",method:"dialog"},[l("button",null,{class:"btn"},"Close",3,null),l("button",null,{class:"btn btn-primary"},"Confirm",3,null)],3,null),3,null)],3,null),3,null),3,null),3,null)],1,"QS_12")},M=({track:e})=>{var d,m,u;const[t,h]=v();e(()=>h.value),(d=window==null?void 0:window.tinymce)==null||d.init({selector:"#mytextarea",height:300,width:800,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"],toolbar:"undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}),(u=(m=window==null?void 0:window.tinymce)==null?void 0:m.activeEditor)==null||u.on("change",()=>{var o,r;t.value=(r=(o=window==null?void 0:window.tinymce)==null?void 0:o.activeEditor)==null?void 0:r.getContent()})},K=()=>{var t;const[e]=v();(t=document.querySelector(".variantArray"))==null||t.insertAdjacentHTML("beforeend",`<p>Variation Name</p>
                          <input
                            type="text"
                            class="input input-md w-full border-[1px] border-[#D1D5DB]"
                            name="variations.${e.value-1}.variation_name"
                          />
                          <p>Variation Image</p>
                          <img
                            src=""
                            class="w-24 h-24"
                            alt=""
                            id="variantImage-${e.value+1}"
                          />
                          <input
                            type="file"
                            class="file w-full"
                          />
                          <input type="hidden" name="variations.${e.value-1}.variation_image" />
                          <p>Variation price</p>
                          <input
                            type="text"
                            class="input input-md w-full border-[1px] border-[#D1D5DB]"
                            name="variations.${e.value-1}.price"
                          />
                          <p>Variation quantity</p>
                          <input
                            type="text"
                            class="input input-md w-full border-[1px] border-[#D1D5DB]"
                            name="variations.${e.value-1}.quantity_on_hand"
                          />

                          <hr class="border-[#D1D5DB] mt-5 pb-5" />`)},p=Object.freeze(Object.defineProperty({__proto__:null,_hW:E,s_67u23Tgdzfw:K,s_AbanyQAPsK8:N,s_D3WEs0juEJ4:R,s_DxtDE8DlSqA:L,s_SMGjc0LeFPA:M,s_fCxW3BUl8dg:U,s_fM7hipk5k2A:V,s_i8TuoTRDL8U:O,s_qJtu77vuUlE:I,s_u9mTK0u6nRI:F},Symbol.toStringTag,{value:"Module"}));export{E as _hW,K as s_67u23Tgdzfw,N as s_AbanyQAPsK8,R as s_D3WEs0juEJ4,L as s_DxtDE8DlSqA,M as s_SMGjc0LeFPA,U as s_fCxW3BUl8dg,V as s_fM7hipk5k2A,O as s_i8TuoTRDL8U,I as s_qJtu77vuUlE,F as s_u9mTK0u6nRI};
