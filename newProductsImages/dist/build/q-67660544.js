import{b,d as x,P as l,E as m,x as S,q as d,M as P,w as O}from"./q-cea67d7a.js";import{getCategoriesServer as F,updateCategoryVisibility as E,useCategories as D}from"./q-f22e01f8.js";import{f as y,g as A,H as N,h as $}from"./q-3239778f.js";import{a as H}from"./q-97996d90.js";const V=()=>{const[t,e]=b();return e(t)},M=async t=>{const[e,s]=b(),o=t.target.value,a=await F(o),r=JSON.parse(a);e.value=r.result,s.value=r.total;const u=new URL(window.location.href);u.searchParams.set("page","1"),u.searchParams.set("search",o),history.pushState({},"",u.toString())},L=async()=>{var r;const[t,e]=b();(r=document==null?void 0:document.getElementById("my_modal_1"))==null||r.close();const s=e.value,o=await E(s),a=JSON.parse(o);a.status==="success"&&(t.value=t.value.map(u=>(u._id===s._id&&(u.isHidden=a.result.isHidden),u)))},q=()=>{const[t]=b(),e=new URL(window.location.href);e.searchParams.set("page",(parseInt(t)-1).toString()),location.href=e.toString()},B=()=>{var f,p,v,_;const t=JSON.parse(D().value??"{}"),e=((f=t==null?void 0:t.result[0])==null?void 0:f.categories)??[],s=x(e),o=x(((p=t==null?void 0:t.result[0])==null?void 0:p.total)??0),a=H(),r=a.url.searchParams.get("search")??"",u=x({}),i=a.url.searchParams.get("page")??"1",g=Math.ceil(o.value/20),w=d(()=>Promise.resolve().then(()=>h),"s_4o3vnhyP6Ps",[u]),k=d(()=>Promise.resolve().then(()=>h),"s_7ICq0nxupDI",[s,o]),I=d(()=>Promise.resolve().then(()=>h),"s_EN0ECYCX1UM",[s,u]);return l("div",null,{class:"flex flex-col w-full h-full bg-[#F9FAFB]"},[l("div",null,{class:"flex flex-row gap-5 items-center"},[l("h1",null,{class:"text-2xl font-bold p-2"},"Categories",3,null),l("input",{value:r},{class:"input input-bordered w-[20rem] m-2",onInput$:k,placeholder:"Search For Products",type:"text"},null,3,null)],1,null),l("div",null,{class:"overflow-x-auto h-[80vh] bg-[#FFF]"},l("table",null,{class:"table table-pin-rows h-full"},[l("thead",null,null,[l("tr",null,null,[" ",l("th",null,null,l("label",null,null,l("input",null,{class:"checkbox",type:"checkbox"},null,3,null),3,null),3,null),l("th",null,{align:"right",colSpan:7},l("button",null,{class:"flex flex-row gap-2 items-center btn btn-ghost"},m(y,null,3,"Ok_0"),1,null),1,null)],1,null),l("tr",null,{class:"bg-[#F1F5F9]"},[l("th",null,null,null,3,null),l("th",null,null,"Category Name",3,null),l("th",null,null,"Visibility",3,null),l("th",null,null,null,3,null)],3,null)],1,null),l("tbody",null,null,[(v=s.value)==null?void 0:v.map((n,c)=>{var C;return S(),l("tr",null,null,[l("th",null,null,l("label",null,null,l("input",null,{class:"checkbox",type:"checkbox"},null,3,null),3,null),3,null),l("th",null,null,n,1,null),l("th",null,null,l("p",{class:`badge ${n!=null&&n.isHidden?"bg-[#FEF2F2] text-[#DC2626]":"bg-[#D1FAE5] text-[#059669]"}`},null,n!=null&&n.isHidden?"In Active":"Active",1,null),1,null),l("th",null,null,[l("button",{onClick$:d(()=>Promise.resolve().then(()=>h),"s_3kK67fK9OgI",[n,w])},{class:"btn btn-ghost btn-sm text-xs"},n!=null&&n.isHidden?m(N,null,3,"Ok_2"):m(A,null,3,"Ok_1"),0,null),l("a",{href:`/admin/brands/${(C=n==null?void 0:n._id)==null?void 0:C.toString()}`},{class:"btn btn-ghost btn-sm text-xs"},m($,null,3,"Ok_3"),1,null)],1,null)],1,c)}),((_=s.value)==null?void 0:_.length)===0&&l("tr",null,null,l("td",null,{class:"text-center",colSpan:8},"No categories found",3,null),3,"Ok_4")],1,null)],1,null),1,null),l("div",null,{class:"bg-[#fff]"},l("div",null,{class:"flex flex-row justify-between gap-2 p-2"},[l("button",{class:`btn btn-ghost btn-sm ${i==="1"?"text-[#D1D5DB]":"text-[#7C3AED]"} text-xs`,disabled:i==="1",onClick$:d(()=>Promise.resolve().then(()=>h),"s_Cyia4OdeLkw",[i])},null,"Previous",2,null),l("p",null,{class:"text-xs"},[i," of ",g],1,null),l("button",{class:`btn btn-ghost btn-sm text-xs ${i===g.toString()?"text-[#D1D5DB]":"text-[#7C3AED]"}`,disabled:i===g.toString(),onClick$:d(()=>Promise.resolve().then(()=>h),"s_eoV340Pk00I",[i])},null,"Next",2,null),l("dialog",null,{class:"modal",id:"my_modal_1"},l("div",null,{class:"modal-box"},[l("h3",null,{class:"font-bold text-lg"},"Change Product Visibility!",3,null),l("p",null,{class:"py-4"},["Are you sure you want change ",P(n=>{var c;return(c=n==null?void 0:n.value)==null?void 0:c.name},[u])," to"," ",P(n=>{var c;return(c=n==null?void 0:n.value)!=null&&c.isHidden?"Active":"In Active"},[u]),"?"],3,null),l("div",null,{class:"modal-action"},l("form",null,{class:"flex gap-2",method:"dialog"},[l("button",null,{class:"btn"},"Close",3,null),l("button",null,{class:"btn btn-primary",onClick$:I},"Confirm",3,null)],3,null),3,null)],3,null),3,null)],1,null),1,null)],1,"Ok_5")},U=()=>{const[t]=b(),e=new URL(window.location.href);e.searchParams.set("page",(parseInt(t)+1).toString()),location.href=e.toString()},j=t=>{var s;const[e]=b();(s=document==null?void 0:document.getElementById("my_modal_1"))==null||s.showModal(),e.value=t},h=Object.freeze(Object.defineProperty({__proto__:null,_hW:O,s_3kK67fK9OgI:V,s_40cDWOFgX7E:B,s_4o3vnhyP6Ps:j,s_7ICq0nxupDI:M,s_Cyia4OdeLkw:q,s_EN0ECYCX1UM:L,s_eoV340Pk00I:U},Symbol.toStringTag,{value:"Module"}));export{O as _hW,V as s_3kK67fK9OgI,B as s_40cDWOFgX7E,j as s_4o3vnhyP6Ps,M as s_7ICq0nxupDI,q as s_Cyia4OdeLkw,L as s_EN0ECYCX1UM,U as s_eoV340Pk00I};
