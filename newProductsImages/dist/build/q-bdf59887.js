import{b as h,d as b,P as l,E as m,x as S,q as i,K as f,L as p,M as y,w as k}from"./q-cea67d7a.js";import{f as D,g as F,H as I,h as $}from"./q-3239778f.js";import{I as E}from"./q-086cadbe.js";import{a as N,e as j}from"./q-97996d90.js";import{useProductData as R,updateProductVisibility as B,getProductsServer as U,getAllProductsServer as H}from"./q-a6082c95.js";const L=()=>{const[s]=h(),t=new URL(window.location.href);t.searchParams.set("page",(parseInt(s)+1).toString()),location.href=t.toString()},O=()=>{const[s]=h(),t=new URL(window.location.href);t.searchParams.set("page",(parseInt(s)-1).toString()),location.href=t.toString()},V=()=>{const[s,t]=h();return s(t)},X=()=>{const s=JSON.parse(R().value),t=b(s.result),o=b(s.total),c=N(),a=c.url.searchParams.get("page")??"1",u=Math.ceil(o.value/20),e=b({}),r=c.url.searchParams.get("search")??"",w=j(),A=i(()=>Promise.resolve().then(()=>d),"s_wd0ryoPAIbU",[e]),C=i(()=>Promise.resolve().then(()=>d),"s_3fn17R22k7E",[e,t]);return l("div",null,{class:"flex flex-col w-full h-full bg-[#F9FAFB]"},[l("div",null,{class:"flex flex-row gap-5 items-center w-full"},[l("h1",null,{class:"text-2xl font-bold p-2"},"Products",3,null),l("input",{value:r},{class:"input input-bordered w-[20rem] m-2",onChange$:i(()=>Promise.resolve().then(()=>d),"s_XsyRqnvVdbo",[o,w,t]),placeholder:"Search For Products",type:"text"},null,3,null),l("a",null,{class:"btn btn-primary ml-auto",href:"/admin/products/add-new"},"Add New Product",3,null),l("button",null,{class:"btn btn-primary ml-auto",onClick$:i(()=>Promise.resolve().then(()=>d),"s_LjzG3FPADf8")},"Download Products Backup",3,null)],1,null),l("div",null,{class:"overflow-x-auto h-[80vh] bg-[#FFF]"},l("table",null,{class:"table table-pin-rows h-full"},[l("thead",null,null,[l("tr",null,null,[" ",l("th",null,null,l("label",null,null,l("input",null,{class:"checkbox",type:"checkbox"},null,3,null),3,null),3,null),l("th",null,{align:"right",colSpan:7},l("button",null,{class:"flex flex-row gap-2 items-center btn btn-ghost"},m(D,null,3,"Ah_0"),1,null),1,null)],1,null),l("tr",null,{class:"bg-[#F1F5F9]"},[l("th",null,null,null,3,null),l("th",null,null,"Image",3,null),l("th",null,null,"Name",3,null),l("th",null,null,"Category",3,null),l("th",null,null,"Item Number",3,null),l("th",null,null,"SKU",3,null),l("th",null,null,"Visibility",3,null),l("th",null,null,null,3,null)],3,null)],1,null),l("tbody",null,null,[t.value.map((n,g)=>{var v,_,x;return S(),l("tr",null,null,[l("th",null,null,l("label",null,null,l("input",null,{class:"checkbox",type:"checkbox"},null,3,null),3,null),3,null),l("th",null,null,m(E,{class:"w-12 h-12 object-contain",onError$:i(()=>import("./q-c55e31e8.js"),"s_zWYNz5tC6Ks"),src:(v=(n==null?void 0:n.imgs)[0])!=null&&v.includes("http")?n==null?void 0:n.imgs[0]:(_=(n==null?void 0:n.imgs)[0])==null?void 0:_.replace(".",""),[f]:{class:f,onError$:f}},3,"Ah_1"),1,null),l("th",null,null,p(n,"product_name"),1,null),l("th",null,null,n.categories.map(P=>`${P.main} - ${P.name}`).join(" & "),1,null),l("th",null,null,p(n,"item_no"),1,null),l("th",null,null,p(n,"sku"),1,null),l("th",null,null,l("p",{class:`badge ${n.isHidden?"bg-[#FEF2F2] text-[#DC2626]":"bg-[#D1FAE5] text-[#059669]"}`},null,n.isHidden?"In Active":"Active",1,null),1,null),l("th",null,null,[l("button",{onClick$:i(()=>Promise.resolve().then(()=>d),"s_fuGFpYyP3aA",[A,n])},{class:"btn btn-ghost btn-sm text-xs"},n.isHidden?m(I,null,3,"Ah_3"):m(F,null,3,"Ah_2"),0,null),l("a",{href:`/admin/products/${(x=n==null?void 0:n._id)==null?void 0:x.toString()}`},{class:"btn btn-ghost btn-sm text-xs"},m($,null,3,"Ah_4"),1,null)],1,null)],1,g)}),t.value.length===0&&l("tr",null,null,l("td",null,{class:"text-center",colSpan:8},"No products found",3,null),3,"Ah_5")],1,null)],1,null),1,null),l("div",null,{class:"bg-[#fff]"},l("div",null,{class:"flex flex-row justify-between gap-2 p-2"},[l("button",{class:`btn btn-ghost btn-sm ${a==="1"?"text-[#D1D5DB]":"text-[#7C3AED]"} text-xs`,disabled:a==="1",onClick$:i(()=>Promise.resolve().then(()=>d),"s_UXDuYJ9B830",[a])},null,"Previous",2,null),l("p",null,{class:"text-xs"},[a," of ",u],1,null),l("button",{class:`btn btn-ghost btn-sm text-xs ${a===u.toString()?"text-[#D1D5DB]":"text-[#7C3AED]"}`,disabled:a===u.toString(),onClick$:i(()=>Promise.resolve().then(()=>d),"s_gooZn6ukXAY",[a])},null,"Next",2,null),l("dialog",null,{class:"modal",id:"my_modal_1"},l("div",null,{class:"modal-box"},[l("h3",null,{class:"font-bold text-lg"},"Change Product Visibility!",3,null),l("p",null,{class:"py-4"},["Are you sure you want change"," ",y(n=>{var g;return(g=n==null?void 0:n.value)==null?void 0:g.product_name},[e])," product to"," ",y(n=>n.value.isHidden?"Active":"In Active",[e]),"?"],3,null),l("div",null,{class:"modal-action"},l("form",null,{class:"flex gap-2",method:"dialog"},[l("button",null,{class:"btn"},"Close",3,null),l("button",null,{class:"btn btn-primary",onClick$:C},"Confirm",3,null)],3,null),3,null)],3,null),3,null)],1,null),1,null)],1,"Ah_6")},Y=async()=>{var e;const[s,t]=h();(e=document==null?void 0:document.getElementById("my_modal_1"))==null||e.close();const o=s.value,c=await B(o),a=JSON.parse(c);if(a.status!=="success")return;const u=t.value.map(r=>(r._id===o._id&&(r.isHidden=a.result.isHidden),r));t.value=u,s.value={}},q=s=>{var o;const[t]=h();(o=document==null?void 0:document.getElementById("my_modal_1"))==null||o.showModal(),s&&(t.value=s)},J=async s=>{const[t,o,c]=h(),a=s.target.value,u=await U(a),e=JSON.parse(u);c.value=e.result,t.value=e.total;const r=new URL(window.location.href);r.searchParams.set("page","1"),r.searchParams.set("search",a),o(r.toString())},z=async()=>{const s=await H(),t=JSON.parse(s),o=[],c=["id","title","description","availability","condition","price","link","image_link","brand"];o.push(c.join(","));for(const e of t){const r=[e._id,e.product_name.substring(0,150),e.description?e.description.replace(/<img .*?>/g,"").replace(/Cosmo Prof/g,"Xpress Beauty").substring(0,9999):"",parseInt(e.quantity_on_hand)>0?"in stock":"out of stock","new",`${parseFloat(e.price.regular).toFixed(2)} CAD`,`https://xpressbeauty.ca/products/${e.perfix}`,e.imgs[0],e.companyName.name];o.push(r.join(","))}const a=o.join(`
`),u=document.createElement("a");u.href="data:text/csv;charset=utf-8,"+encodeURIComponent(a),u.download="products.csv",document.body.appendChild(u),u.click(),document.body.removeChild(u)},d=Object.freeze(Object.defineProperty({__proto__:null,_hW:k,s_08E0mTI0xKg:X,s_3fn17R22k7E:Y,s_LjzG3FPADf8:z,s_UXDuYJ9B830:O,s_XsyRqnvVdbo:J,s_fuGFpYyP3aA:V,s_gooZn6ukXAY:L,s_wd0ryoPAIbU:q},Symbol.toStringTag,{value:"Module"}));export{k as _hW,X as s_08E0mTI0xKg,Y as s_3fn17R22k7E,z as s_LjzG3FPADf8,O as s_UXDuYJ9B830,J as s_XsyRqnvVdbo,V as s_fuGFpYyP3aA,L as s_gooZn6ukXAY,q as s_wd0ryoPAIbU};
