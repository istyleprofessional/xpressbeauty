import{b,a as x,d as v,P as s,M as y,q as f,w as h}from"./q-cea67d7a.js";import{g as Q}from"./q-428d01c3.js";import{p as g}from"./q-46496603.js";import{C as q}from"./q-85815eba.js";import"./q-97996d90.js";const _=async()=>{var i;const[c,t,u]=b();if(!await Q(t.product.id??"",u.value+1))return;u.value=u.value+1,c.cart.totalQuantity=c.cart.totalQuantity+1,t.product.quantity=u.value,t.product.currency==="CAD"&&t.country==="1"?t.product.price=t.product.price*.9:t.product.currency==="USD"&&t.country==="2"&&(t.product.price=t.product.price/.9),t.product.currency=t.country==="2"?"CAD":"USD";const e={product:t.product,totalQuantity:c.cart.totalQuantity},r=await(await g("/api/cart",JSON.stringify(e))).json();c.cart.products=r.products,c.cart.totalQuantity=r.totalQuantity;const n=(i=r==null?void 0:r.products)==null?void 0:i.reduce((d,l)=>d+l.price*l.quantity,0);let a=15;n>80&&n<100&&(a=a-a*.3),n>100&&n<150&&(a=a-a*.5),n>150&&n<200&&(a=a-a*.7),n>200&&(a=0),console.log("shipping",a),c.cart.shipping=a,c.cart.totalPrice=n},w=async()=>{var i;const[c,t,u]=b();if(!await Q(t.product.id??"",u.value-1))return;u.value=u.value-1,c.cart.totalQuantity=c.cart.totalQuantity-1,t.product.quantity=u.value,t.product.currency==="CAD"&&t.country==="1"?t.product.price=t.product.price*.9:t.product.currency==="USD"&&t.country==="2"&&(t.product.price=t.product.price*1.1),t.product.currency=t.country==="2"?"CAD":"USD";const e={product:t.product,totalQuantity:c.cart.totalQuantity},r=await(await g("/api/cart",JSON.stringify(e))).json();c.cart.products=r.products,c.cart.totalQuantity=r.totalQuantity;const n=(i=r==null?void 0:r.products)==null?void 0:i.reduce((d,l)=>d+l.price*l.quantity,0);let a=15;n>80&&n<100&&(a=a-a*.3),n>100&&n<150&&(a=a-a*.5),n>150&&n<200&&(a=a-a*.7),n>200&&(a=0),c.cart.shipping=a,c.cart.totalPrice=n},k=c=>{const t=x(q),u=v(c.product.quantity??0),p=f(()=>Promise.resolve().then(()=>m),"s_SZ0Ak3rQTsM",[t,c,u]),e=f(()=>Promise.resolve().then(()=>m),"s_tMDsbGAvuLM",[t,c,u]);return s("div",null,{class:"flex flex-row items-center justify-center w-full"},s("label",null,{class:"input-group input-group-xs md:input-group-lg w-44 flex flex-row gap-2"},[s("span",null,{class:y(o=>`btn btn-sm md:btn-sm text-sm md:text-xl text-black bg-[#F4F4F5] ${o.value===0?"btn-disabled":""}`,[u]),onClick$:p},"-",3,null),s("input",null,{class:"input input-sm input-bordered w-full text-black",max:y(o=>o.product.quantity_on_hand,[c]),min:"0",readOnly:!0,type:"number",value:y(o=>o.value,[u])},null,3,null),s("span",null,{class:"btn btn-sm text-sm md:btn-sm text-black bg-[#F4F4F5]",onClick$:e},"+",3,null)],3,null),3,"B0_0")},m=Object.freeze(Object.defineProperty({__proto__:null,_hW:h,s_SZ0Ak3rQTsM:w,s_d2XPR1gzsdM:k,s_tMDsbGAvuLM:_},Symbol.toStringTag,{value:"Module"}));export{h as _hW,w as s_SZ0Ak3rQTsM,k as s_d2XPR1gzsdM,_ as s_tMDsbGAvuLM};
