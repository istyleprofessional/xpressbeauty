import{b,d as x,P as l,E as m,x as F,q as d,M as C,w as D}from"./q-cea67d7a.js";import{getCategoriesServer as J,useCategories as N,updateCategoryVisibility as A}from"./q-d90757e9.js";import{f as y,g as E,H,h as $}from"./q-3239778f.js";import{a as k}from"./q-97996d90.js";const W=()=>{const[t]=b(),e=new URL(window.location.href);e.searchParams.set("page",(parseInt(t)-1).toString()),location.href=e.toString()},B=t=>{var s;const[e]=b();(s=document==null?void 0:document.getElementById("my_modal_1"))==null||s.showModal(),e.value=t},M=()=>{const[t]=b(),e=new URL(window.location.href);e.searchParams.set("page",(parseInt(t)+1).toString()),location.href=e.toString()},O=()=>{const[t,e]=b();return e(t)},U=async t=>{const[e,s]=b(),o=t.target.value,a=await J(o),r=JSON.parse(a);e.value=r.result,s.value=r.total;const u=new URL(window.location.href);u.searchParams.set("page","1"),u.searchParams.set("search",o),history.pushState({},"",u.toString())},j=()=>{var f,p,v,_;const t=JSON.parse(N().value??"{}"),e=((f=t==null?void 0:t.result[0])==null?void 0:f.categories)??[],s=x(e),o=x(((p=t==null?void 0:t.result[0])==null?void 0:p.total)??0),a=k(),r=a.url.searchParams.get("search")??"",u=x({}),i=a.url.searchParams.get("page")??"1",g=Math.ceil(o.value/20),P=d(()=>Promise.resolve().then(()=>h),"s_YmW6HTnIax8",[u]),S=d(()=>Promise.resolve().then(()=>h),"s_gnrXDaB2JI0",[s,o]),I=d(()=>Promise.resolve().then(()=>h),"s_M2C1aJWDN04",[s,u]);return l("div",null,{class:"flex flex-col w-full h-full bg-[#F9FAFB]"},[l("div",null,{class:"flex flex-row gap-5 items-center"},[l("h1",null,{class:"text-2xl font-bold p-2"},"Categories",3,null),l("input",{value:r},{class:"input input-bordered w-[20rem] m-2",onInput$:S,placeholder:"Search For Products",type:"text"},null,3,null)],1,null),l("div",null,{class:"overflow-x-auto h-[80vh] bg-[#FFF]"},l("table",null,{class:"table table-pin-rows h-full"},[l("thead",null,null,[l("tr",null,null,[" ",l("th",null,null,l("label",null,null,l("input",null,{class:"checkbox",type:"checkbox"},null,3,null),3,null),3,null),l("th",null,{align:"right",colSpan:7},l("button",null,{class:"flex flex-row gap-2 items-center btn btn-ghost"},m(y,null,3,"lJ_0"),1,null),1,null)],1,null),l("tr",null,{class:"bg-[#F1F5F9]"},[l("th",null,null,null,3,null),l("th",null,null,"Category Name",3,null),l("th",null,null,"Visibility",3,null),l("th",null,null,null,3,null)],3,null)],1,null),l("tbody",null,null,[(v=s.value)==null?void 0:v.map((n,c)=>{var w;return F(),l("tr",null,null,[l("th",null,null,l("label",null,null,l("input",null,{class:"checkbox",type:"checkbox"},null,3,null),3,null),3,null),l("th",null,null,n,1,null),l("th",null,null,l("p",{class:`badge ${n!=null&&n.isHidden?"bg-[#FEF2F2] text-[#DC2626]":"bg-[#D1FAE5] text-[#059669]"}`},null,n!=null&&n.isHidden?"In Active":"Active",1,null),1,null),l("th",null,null,[l("button",{onClick$:d(()=>Promise.resolve().then(()=>h),"s_9WGUjTaXI10",[n,P])},{class:"btn btn-ghost btn-sm text-xs"},n!=null&&n.isHidden?m(H,null,3,"lJ_2"):m(E,null,3,"lJ_1"),0,null),l("a",{href:`/admin/brands/${(w=n==null?void 0:n._id)==null?void 0:w.toString()}`},{class:"btn btn-ghost btn-sm text-xs"},m($,null,3,"lJ_3"),1,null)],1,null)],1,c)}),((_=s.value)==null?void 0:_.length)===0&&l("tr",null,null,l("td",null,{class:"text-center",colSpan:8},"No categories found",3,null),3,"lJ_4")],1,null)],1,null),1,null),l("div",null,{class:"bg-[#fff]"},l("div",null,{class:"flex flex-row justify-between gap-2 p-2"},[l("button",{class:`btn btn-ghost btn-sm ${i==="1"?"text-[#D1D5DB]":"text-[#7C3AED]"} text-xs`,disabled:i==="1",onClick$:d(()=>Promise.resolve().then(()=>h),"s_Uwdszgyd0Ro",[i])},null,"Previous",2,null),l("p",null,{class:"text-xs"},[i," of ",g],1,null),l("button",{class:`btn btn-ghost btn-sm text-xs ${i===g.toString()?"text-[#D1D5DB]":"text-[#7C3AED]"}`,disabled:i===g.toString(),onClick$:d(()=>Promise.resolve().then(()=>h),"s_02Q1N0PXLic",[i])},null,"Next",2,null),l("dialog",null,{class:"modal",id:"my_modal_1"},l("div",null,{class:"modal-box"},[l("h3",null,{class:"font-bold text-lg"},"Change Product Visibility!",3,null),l("p",null,{class:"py-4"},["Are you sure you want change ",C(n=>{var c;return(c=n==null?void 0:n.value)==null?void 0:c.name},[u])," to"," ",C(n=>{var c;return(c=n==null?void 0:n.value)!=null&&c.isHidden?"Active":"In Active"},[u]),"?"],3,null),l("div",null,{class:"modal-action"},l("form",null,{class:"flex gap-2",method:"dialog"},[l("button",null,{class:"btn"},"Close",3,null),l("button",null,{class:"btn btn-primary",onClick$:I},"Confirm",3,null)],3,null),3,null)],3,null),3,null)],1,null),1,null)],1,"lJ_5")},L=async()=>{var r;const[t,e]=b();(r=document==null?void 0:document.getElementById("my_modal_1"))==null||r.close();const s=e.value,o=await A(s),a=JSON.parse(o);a.status==="success"&&(t.value=t.value.map(u=>(u._id===s._id&&(u.isHidden=a.result.isHidden),u)))},h=Object.freeze(Object.defineProperty({__proto__:null,_hW:D,s_02Q1N0PXLic:M,s_6P2F7wKwaqE:j,s_9WGUjTaXI10:O,s_M2C1aJWDN04:L,s_Uwdszgyd0Ro:W,s_YmW6HTnIax8:B,s_gnrXDaB2JI0:U},Symbol.toStringTag,{value:"Module"}));export{D as _hW,M as s_02Q1N0PXLic,j as s_6P2F7wKwaqE,O as s_9WGUjTaXI10,L as s_M2C1aJWDN04,W as s_Uwdszgyd0Ro,B as s_YmW6HTnIax8,U as s_gnrXDaB2JI0};
